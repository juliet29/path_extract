<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js" integrity="sha512-zInFF17qBFVvvvFpIfeBzo7Tj7+rQxLeTJDmbxjBz5/zIr89YVbTNelNhdTT+/DCrxoVzBeUPVFJsczKbB7sew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.1/d3.min.js" integrity="sha256-SQJ/nCYPXFPuqoS56EfnesDBPNiitndOIfN2WdPRi/o=" crossorigin="anonymous"></script>
    <script src="https://code.highcharts.com/highcharts.src.js"></script>
    <script src="https://unpkg.com/browse/human-number@2.0.4/src/index.js"></script>
    <title>Document</title>
    <style>
      html {
        height: 100%;
      }
      body { margin: 0 }
      body {
        height: 100%;
      }
      body * {
        font-family: "roboto";
      }
    
      @page {
          size: A3 landscape;
      }
    
      .score-card {
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        margin: 0 auto;
        padding: 25px 25px;
        font-size: 1.1vw;
        color: #202528;
      }
      .section {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-column-gap: 10%;
          margin-left: 40px;
      }
      .score-card .project-details-wrapper {
          padding-bottom: 10px;
          border-bottom: 1px solid #111;
    
      }
      .score-card .project-details-wrapper .project-details {
        display: grid;
        grid-template-columns: 36em auto 11.03em;
        grid-column-gap: 4%;
        align-items: end;
      }
      .score-card .project-details-wrapper .project-details .project-title {
        margin: 0;
        padding-left: 20px;
        font-size: 1.9em;
        font-weight: initial;
        text-transform: capitalize;
      }
      .score-card .project-details-wrapper .project-details .logo {
          margin: 0;
          width: 100px;
          padding-bottom: 10px;
          transform: translateY(5pt);
      }
      .score-card .project-details-wrapper .project-details .logo img {
          width: 9.03em;
          padding-bottom:25px;
          padding-right:25px;
      }
      .score-card .project-details-wrapper .project-details div > div {
        display: grid;
        grid-template-columns: 10em 1fr;
        grid-column-gap: 10px;
        font-size: 0.8em;
        color: #202528;
      }
      .score-card .project-details-wrapper .project-details div > div span {
        text-align: right;
      }
      .score-card .project-description {
        padding-bottom:3px;
      }
      .score-card .project-details-wrapper .project-details div > div span:nth-of-type(2) {
        text-align: left;
        font-weight: 600;
      }
      .score-card .ok {
        color: #00a25f;
      }
      .score-card .seq {
          color: #00a25f;
      }
    
    </style>
    <style>
      .score-card {
          display: grid;
          padding-top: 40px;
          grid-template-rows: auto auto 1fr;
      }
      .score-card .section-header {
          text-transform: uppercase;
          font-size: 1.1em;
          font-weight: 600;
      }
    
      .score-card .section-header.extra-space {
          margin-top: 16px;
      }
      .score-card .main {
        padding-top: 20px;
        margin-left: 40px;
        margin-right: 40px;
        display: grid;
        grid-template-columns: 40% 50%;
        grid-column-gap: 10%;
      }
      .score-card .data-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          justify-content: space-between;
          margin: 5px 0;
          font-size: 0.9em;
      }
      .score-card .data-row:has(.title) {
          margin: 11px 0;
      }
      .score-card .data-row > *:nth-child(2) {
         text-align: right;
      }
      .score-card .info-row {
          display: grid;
          grid-template-columns: 1fr;
          justify-content: space-between;
          margin: 5px 0;
          font-size: 0.9em;
      }
      .score-card .info-row:has(.title) {
          margin: 11px 0;
      }
      .score-card .statistics div.title {
        font-size: 1.1em !important;
        font-weight: 600;
      }
      .score-card .benefits.statistics {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-column-gap: 10%;
      }
      .score-card .chart-titles span {
        font-size: 1.2em !important;
        font-weight: 600;
      }
      .score-card .impact-chart .chart-titles .years-to-positive {
          margin-left: 20px;
          font-size: 1.6em !important;
      }
      .score-card .impact-chart .chart-titles .years-to-positive .inf-fixed {
          position: relative;
          top: 9px;
      }
      .score-card .impact-chart .chart-titles .years-to-positive .astr-fixed {
          font-size: 0.7em !important;
          position: relative;
          top: -7px;
      }
      .score-card .impact-chart .chart-titles .years-to-positive-text {
          margin-left: 5px;
          font-size: 0.9em !important;
          font-weight: 400;
      }
      .chart-descriptor {
        font-size: 0.7em;
      }
      .chart-descriptor-value {
        font-size: 1.2em;
      }
      .chart-descriptor-value tspan:not(:first-of-type) {
        font-size: 0.45em;
      }
      .x-axis-label {
        font-size: 0.8em;
      }
      .score-card > .charts {
          display: grid;
          margin-top: 8px;
          margin-left: 40px;
          margin-right: 40px;
          grid-column-gap: 10%;
          flex-basis: 50%;
          grid-template-columns: 40% 50%;
      }
      .score-card .impact-chart .bar-chart {
        overflow:visible !important;
      }
      .score-card .emissions-chart {
          width: 100% !important;
          margin-top: 10px;
          overflow: visible !important;
      }
      .pie-chart {
        overflow: visible !important;
      }
      .highcharts-container {
        margin: 0 40px 0 40px;
        padding: 0;
        overflow: visible !important;
      }
      svg { overflow: visible; !important;}
    </style>
</head>
<body>

<div class="score-card" ref="scorecard" :style="{ 'font-size': fontSize; page-break-inside: avoid; }">
    <div class="project-details-wrapper" id="project-details-wrapper">
      <div class="project-details">
        <h2 class="project-title">Climate positive design <strong>scorecard</strong></h2>
        <div class="project-description">
          <div>
            <span>Project Name</span>
            <span>Saginaw Riverfront Park</span>
          </div>
          <div>
            <span>Type of Project</span>
            <span>Park</span>
          </div>
        </div>
        <div class="logo">
          <img src="https://app.climatepositivedesign.com/img/pathfinder-dark-color.png">
        </div>
      </div>
    </div>
    <div class="main" id="main-wrapper">
        <div>
            <div class="section-header">
                Carbon Impact
            </div>
            <div class="statistics" id="column1">
                <div class="data-row">
                    <div class="title">
                        Net Impact over 60 years
                    </div>
                    <div class="title emit">7,884 Metric Tons</div>
                </div>
                <div class="data-row">
                    <span>Total Embodied Emissions</span>
                    <span class="">5,785,975 kgCO?e</span>
                </div>
                <div class="data-row">
                    <span>Total Biogenic <span style="font-size:x-small">(Sequestration + Emissions)</span></span>
                    <span class="seq">131,932 kgCO?e</span>
                </div>
                <div class="data-row">
                    <span>Total Operational Emissions</span>
                    <span class="">2,229,791 kgCO?e</span>
                </div>
                <div class="data-row">
                    <span>Total Carbon Stored</span>
                    <span class="ok">14,513 kgCO?e</span>
                </div>
            </div>
            <div class="section-header extra-space">
                Project Area
            </div>
            <div class="profile statistics">
                <div class="data-row">
                    <div class="title">
                        Site Area
                    </div>
                    <div class="title">276,101 ft (6.00 acres)</div>
                </div>
                <div class="data-row">
                    <span>Planted Area</span>
                    <span>199,493 ft (72% of total area)</span>
                </div>
                <div class="data-row">
                    <span>Emissions per Area</span>
                    <span>56 kgCO?e/ft</span>
                </div>
                <div class="data-row">
                    <span>Sequestration per Area</span>
                    <span class="ok">1 kgCO?e/ft</span>
                </div>
            </div>
        </div>
        <div>
            <div class="section-header">
                Benefits
            </div>
            <div class="statistics benefits" id="column2">
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Biodiversity</span>
                        </div>
                    </div>
                    <div class="info-row ">
                            0%
                        Existing Native Ecosystem Preserved
                    </div>
                    <div class="info-row ok">
                            24%
                        Biodiversity Net Impact
                    </div>
                </div>
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Cooling</span>
                        </div>
                    </div>
                    <div class="info-row">
                         Not
                                                Designated Severe Heat Zone
                    </div>
                    <div class="info-row">
                        35% of Project Site Shaded
                    </div>
                </div>
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Water</span>
                        </div>
                    </div>
                    <div class="info-row">
                        <div class="ok">44% Water Use Reduction from Baseline</div>
                    </div>
                </div>
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Equity</span>
                        </div>
                    </div>
                    <div class="info-row">
                        Designated Underserved Community
                    </div>
                </div>
            </div>
            <div class="section-header extra-space">
                IMPROVEMENTS
            </div>
            <div class="statistics benefits">
                <div>
                    <div class="info-row">From Baseline Project: N/A*</div>
                    <div class="info-row">N/A* Total Emissions Reduction</div>
                    <div class="info-row">N/A* Total Sequestration Increase</div>
                </div>
            </div>
        </div>
    </div>
    <div class="charts">
        <div class="emissions-chart" id="emissions-chart">
            <div class="chart-titles">
                <span>Project Emissions</span>
            </div>
            <div id="pie-chart" class="pie-chart" data-highcharts-chart="2" style="overflow: hidden;"><div id="highcharts-knindk4-34" dir="ltr" style="position: relative; overflow: hidden; width: 522px; height: 271px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); user-select: none; touch-action: manipulation; outline: none; padding: 0px;" class="highcharts-container "><svg version="1.1" class="highcharts-root" style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, sans-serif; font-size: 1rem;" xmlns="http://www.w3.org/2000/svg" width="522" height="271" viewBox="0 0 522 271" role="img" aria-label=""><desc>Created with Highcharts 12.3.0</desc><defs><filter id="highcharts-drop-shadow-2"><feDropShadow dx="1" dy="1" flood-color="#000000" flood-opacity="0.75" stdDeviation="2.5"></feDropShadow></filter></defs><rect fill="none" class="highcharts-background" filter="none" x="0" y="0" width="522" height="271" rx="0" ry="0"></rect><rect fill="none" class="highcharts-plot-background" x="50" y="50" width="422" height="171" filter="none"></rect><rect fill="none" class="highcharts-plot-border" data-z-index="1" stroke="#cccccc" stroke-width="0" x="50" y="50" width="422" height="171"></rect><g class="highcharts-series-group" data-z-index="3" filter="none"><g class="highcharts-series highcharts-series-0 highcharts-pie-series highcharts-tracker" data-z-index="0.1" opacity="1" transform="translate(50,50) scale(1 1)" filter="none" clip-path="none" style="cursor: pointer;"><path fill="#d6dade" d="M 210.984724849182 10.501668240755066 A 0.5 0.5 0 0 1 211.48795633773668 10.00157684684757 A 75.5 75.5 0 0 1 276.09098746781575 123.75458600566282 A 0.5 0.5 0 0 1 275.4037115520636 123.93061199510865 L 275.4037115520636 123.93061199510865 A 0.5 0.5 0 0 1 275.2288551834738 123.24790274730967 A 74.5 74.5 0 0 0 211.48149333988587 11.001555961458862 A 0.5 0.5 0 0 1 210.984724849182 10.501668240755066 Z" class="highcharts-halo highcharts-color-0" data-z-index="-1" fill-opacity="0.25" visibility="hidden"></path><path fill="rgb(214,218,222)" d="M 210.98524633993327 13.062097060105927 A 3 3 0 0 1 214.10877370989016 10.064030290446354 A 75.5 75.5 0 0 1 277.37984961686305 121.47173285849107 A 3 3 0 0 1 273.20498105682515 122.61859819174245 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-0"></path><path fill="rgb(205,209,213)" d="M 273.20498105682515 122.61859819174245 A 3 3 0 0 1 274.1781109290762 126.83734751327597 A 75.5 75.5 0 0 1 197.72010024942395 159.82290536984308 A 3 3 0 0 1 195.3189147262138 156.2202486183147 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-1"></path><path fill="rgb(196,200,203)" d="M 195.3189147262138 156.2202486183147 A 3 3 0 0 1 191.61998421482824 158.47030209726756 A 75.5 75.5 0 0 1 144.20647048556657 120.69764786181756 A 3 3 0 0 1 145.57295651028255 116.5894191035249 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-2"></path><path fill="rgb(186,190,193)" d="M 145.57295651028255 116.5894191035249 A 3 3 0 0 1 141.5247906599874 115.05410778828258 A 75.5 75.5 0 0 1 141.2273818630477 56.655039290804496 A 3 3 0 0 1 145.25970038883136 55.078576512040385 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-3"></path><path fill="#b0b3b7" d="M 145.25970038883136 55.078576512040385 A 3 3 0 0 1 143.85144239507005 50.98447868599687 A 75.5 75.5 0 0 1 161.34258383031477 28.628293331827265 A 3 3 0 0 1 165.6552408792743 29.010152945123295 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-4"></path><path fill="#a5a8ac" d="M 165.6552408792743 29.010152945123295 A 3 3 0 0 1 166.2152282078979 24.716990733188148 A 75.5 75.5 0 0 1 188.9205836889223 13.300627597172863 A 3 3 0 0 1 192.70060680126784 15.411611456973873 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-5"></path><path fill="#999ca0" d="M 192.70060680126784 15.411611456973873 A 3 3 0 0 1 194.96619737302868 11.722176954593408 A 75.5 75.5 0 0 1 198.46639588959115 11.047607372203657 A 3 3 0 0 1 201.94086718240487 13.630798581080839 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-6"></path><path fill="#8c9093" d="M 201.92370494127883 13.494644647904039 A 2.868209725996149 2.868209725996149 0 0 1 204.52335178885548 10.278307464208979 A 75.5 75.5 0 0 1 204.52335178885548 10.278307464208979 A 2.868209725996149 2.868209725996149 0 0 1 207.63452080381865 13.002938810220371 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-7"></path><path fill="#7e8184" d="M 207.55101469918162 11.204102203398023 A 1.1157223244477774 1.1157223244477774 0 0 1 208.6305211210077 10.03719081665453 A 75.5 75.5 0 0 1 208.6305211210077 10.03719081665453 A 1.1157223244477774 1.1157223244477774 0 0 1 209.78110924356974 11.134078810706072 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-8"></path><path fill="#6f7274" d="M 209.7670104060811 10.273892586460335 A 0.2633278150190637 0.2633278150190637 0 0 1 210.02690892406955 10.006271162712167 A 75.5 75.5 0 0 1 210.02690892406955 10.006271162712167 A 0.2633278150190637 0.2633278150190637 0 0 1 210.29361906568235 10.26710476189453 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-9"></path><path fill="#5c5f62" d="M 210.29361906568235 10.267104761894487 A 0.2633278150190304 0.2633278150190304 0 0 1 210.55538455085028 10.001309169612895 A 75.5 75.5 0 0 1 210.55538455085028 10.001309169612895 A 0.2633278150190304 0.2633278150190304 0 0 1 210.82026233780797 10.26400333414253 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-10"></path><path fill="#45484b" d="M 210.81981243024637 10.07567750753816 A 0.07542456286636338 0.07542456286636338 0 0 1 210.89513201467565 10.00007282979901 A 75.5 75.5 0 0 1 210.89513201467565 10.00007282979901 A 0.07542456286636338 0.07542456286636338 0 0 1 210.97066133504057 10.0754679812336 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-11"></path><path fill="#202528" d="M 210.9706319816965 10.000005711791601 A 0 0 0 0 1 210.9706319816965 10.000005711791601 A 75.5 75.5 0 0 1 210.9706319816965 10.000005711791601 A 0 0 0 0 1 210.9706319816965 10.000005711791601 L 211 85.5 A 0 0 0 0 1 211 85.5 A 0 0 0 0 0 211 85.5 A 0 0 0 0 1 211 85.5 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-12"></path></g><g class="highcharts-markers highcharts-series-0 highcharts-pie-series" data-z-index="0.1" opacity="1" transform="translate(50,50) scale(1 1)" clip-path="none"></g></g><text x="261" class="highcharts-title" data-z-index="4" text-align="center" y="25" text-anchor="middle" transform-origin="10 22" transform="translate(0,0) scale(1 1)" style="font-size: 1.2em;"></text><text x="261" class="highcharts-subtitle" data-z-index="4" text-align="center" y="24" text-anchor="middle" transform-origin="10 15" transform="translate(0,0) scale(1 1)" style="font-size: 0.8em; fill: rgb(102, 102, 102);"></text><text x="10" text-anchor="start" class="highcharts-caption" data-z-index="4" style="font-size: 0.8em; fill: rgb(102, 102, 102);" text-align="left" y="268" transform-origin="10 15" transform="translate(0,0) scale(1 1)"></text><g class="highcharts-datalabels-group" data-z-index="6"><g class="highcharts-data-labels highcharts-series-0 highcharts-pie-series highcharts-tracker" data-z-index="6" opacity="1" transform="translate(50,50) scale(1 1)" style="cursor: pointer;"><path fill="none" class="highcharts-data-label-connector highcharts-color-0" stroke-width="1" stroke="#d6dade" d="M 307.753429159632 33.42737535471831 L 302.75342915963193 33.42737535471831 L 281.8806111517536 45.27328048729424 L 276.66240664978403 48.23475677043822" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-1" stroke-width="1" stroke="#cdd1d5" d="M 268.0907493476346 177.24314051961545 L 263.0907493476345 177.24314051961545 L 251.240721060021 156.37266305543753 L 248.2782139881176 151.15504368939304" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-2" stroke-width="1" stroke="#c4c8cb" d="M 140.27960010724084 168.0292617072019 L 145.27960010724084 168.0292617072019 L 160.23021240511972 149.2548325036678 L 163.96786547958942 144.5612252027843" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-3" stroke-width="1" stroke="#babec1" d="M 105.4701536855845 117.5 L 129.50110540360996 85.92447563711399 L 135.50102402420308 85.89322589695836" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-4" stroke-width="1" stroke="#b0b3b7" d="M 100.61855001946499 80.5 L 146.80574262693946 35.28698056956481 L 151.53170022495618 38.98364457671342" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-5" stroke-width="1" stroke="#a5a8ac" d="M 109.22061169856467 43.5 L 174.37207559417206 12.694470308080632 L 177.06860990625756 18.054386604418255" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-6" stroke-width="1" stroke="#999ca0" d="M 136.07682787516 6.5 L 195.55183354147567 5.477477213788595 L 196.6891218697106 11.368705885166122" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-7" stroke-width="1" stroke="#8c9093" d="M 196.9233137228346 -13.108818689137191 L 202.4846221034001 -13.108818689137191 L 203.98815230721328 4.3021921974911725 L 204.504361953308 10.279944919148264" visibility="hidden" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-8" stroke-width="1" stroke="#7e8184" d="M 202.66207343138439 -13.447182258335044 L 207.86783068569255 -13.447182258335044 L 208.42141217685148 4.040802331238806 L 208.61124686321824 10.037798478632268" visibility="hidden" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-9" stroke-width="1" stroke="#6f7274" d="M 204.63317781238143 -13.491145586288116 L 209.71739667425982 -13.491145586288116 L 209.944113665489 4.006840139502546 L 210.02184762876587 10.00633657095021" visibility="hidden" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-10" stroke-width="1" stroke="#5c5f62" d="M 205.36390361203317 -13.498082358805068 L 210.40309509712486 -13.498082358805068 L 210.50860800361 4.001481400543954 L 210.54478410150372 10.00137234038121" visibility="hidden" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-11" stroke-width="1" stroke="#45484b" d="M 205.83432492390435 -13.499869913517713 L 210.84453240563215 -13.499869913517713 L 210.87201404073977 4.000100493348876 L 210.8814363199491 10.000093095065523" visibility="hidden" opacity="1"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-12" stroke-width="1" stroke="#202528" d="M 205.97603135762674 -13.499997277270978 L 210.97750809868094 -13.499997277270978 L 210.98148393979181 4.000002103340426 L 210.98284708532861 10.000001948493278" visibility="hidden" opacity="1"></path><g class="highcharts-label highcharts-data-label highcharts-data-label-color-0" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(313,15)" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Playground &amp; Athletic</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>33.6 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-1" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(273,159)" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Soil Amendments &amp; Mulch</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>19.9 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-2" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(-34,150)" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Aggregate &amp; Asphalt Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>14.5 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-3" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(-10,99)" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Concrete Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>14.0 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-4" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(-21,62)" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Landscape Water Use</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>7.3 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-5" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(26,25)" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Site Elements</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>6.7 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-6" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(94,-12)" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Lawn</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>2.1 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-7" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(36,-32)" visibility="hidden" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Demolition &amp; Site Preparation</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>1.3 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-8" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(63,-32)" visibility="hidden" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Metal &amp; Wood Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>0.5 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-9" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(67,-32)" visibility="hidden" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Brick &amp; Stone Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>0.1 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-10" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(132,-32)" visibility="hidden" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Furnishings</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>0.1 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-11" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(53,-32)" visibility="hidden" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Infrastructure &amp; Subsurface</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>0.0 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-12" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(156,-32)" visibility="hidden" opacity="1"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Shrubs</tspan><tspan class="highcharts-br" dy="14" x="5">?</tspan>0.0 %</text></g></g></g><g class="highcharts-legend highcharts-no-tooltip" data-z-index="7" visibility="hidden"><rect fill="none" class="highcharts-legend-box" rx="0" ry="0" stroke="#999999" stroke-width="0" filter="none" x="0" y="0" width="8" height="8"></rect><g data-z-index="1"><g></g></g></g><g class="highcharts-label highcharts-tooltip highcharts-color-0" data-z-index="8" filter="url(#highcharts-drop-shadow-2)" style="cursor: default; pointer-events: none;" transform="translate(269,72)" opacity="0" visibility="hidden"><path fill="#ffffff" class="highcharts-label-box highcharts-tooltip-box" d="M 3 0 L 117 0 A 3 3 0 0 1 120 3 L 120 41 A 3 3 0 0 1 117 44 L 3 44 A 3 3 0 0 1 0 41 L 0 3 A 3 3 0 0 1 3 0 Z" stroke-width="0" stroke="#d6dade"></path><text x="8" data-z-index="1" y="18" style="font-size: 0.8em; fill: rgb(51, 51, 51);"><tspan style="font-size: 0.8em;">Playground &amp; Athletic</tspan><tspan class="highcharts-br" dy="15" x="8">?</tspan><tspan style="font-weight: bold;">2,748,000 kgCO?e</tspan></text></g></svg></div></div>
        </div>
        <div class="impact-chart">
            <div class="chart-titles">
                <span>Project Impact</span>
                <span class="years-to-positive"><span class="material-icons inf-fixed">?</span><span class="astr-fixed">**</span></span>
                <span class="years-to-positive-text">years to positive</span>
            </div>
            <div>
                <svg class="bar-chart" viewport="0 0 671 315" width="678.6" height="271">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7"></polygon>
                        </marker>
                    </defs>
                    <g class="inner-box" transform="translate(67.86, 30)"><g class="x axis" transform="translate(0, 197.64)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M0.5,6V0.5H547.3100000000001V6"></path><g class="tick" opacity="1" transform="translate(26.02731525522042,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2030</text></g><g class="tick" opacity="1" transform="translate(72.36026467517402,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2035</text></g><g class="tick" opacity="1" transform="translate(118.69321409512763,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2040</text></g><g class="tick" opacity="1" transform="translate(165.05153752900236,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2045</text></g><g class="tick" opacity="1" transform="translate(211.38448694895592,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2050</text></g><g class="tick" opacity="1" transform="translate(257.71743636890955,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2055</text></g><g class="tick" opacity="1" transform="translate(304.05038578886314,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2060</text></g><g class="tick" opacity="1" transform="translate(350.40870922273785,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2065</text></g><g class="tick" opacity="1" transform="translate(396.74165864269145,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2070</text></g><g class="tick" opacity="1" transform="translate(443.07460806264504,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2075</text></g><g class="tick" opacity="1" transform="translate(489.4075574825987,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2080</text></g><g class="tick" opacity="1" transform="translate(535.7658809164734,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2085</text></g></g><g class="y axis" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><path class="domain" stroke="currentColor" d="M-6,198.14H0.5V0.5H-6"></path><g class="tick" opacity="1" transform="translate(0,198.14)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">0.00</text></g><g class="tick" opacity="1" transform="translate(0,176.17999999999998)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">1.00</text></g><g class="tick" opacity="1" transform="translate(0,154.22)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">2.00</text></g><g class="tick" opacity="1" transform="translate(0,132.26000000000002)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">3.00</text></g><g class="tick" opacity="1" transform="translate(0,110.3)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">4.00</text></g><g class="tick" opacity="1" transform="translate(0,88.33999999999999)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">5.00</text></g><g class="tick" opacity="1" transform="translate(0,66.38000000000001)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">6.00</text></g><g class="tick" opacity="1" transform="translate(0,44.419999999999995)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">7.00</text></g><g class="tick" opacity="1" transform="translate(0,22.460000000000008)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">8.00</text></g><g class="tick" opacity="1" transform="translate(0,0.5)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">9.00</text></g></g><text class="x-axis-label" transform="translate(0, 232.64)" text-anchor="middle">Construction Completion</text><text class="x-axis-label" transform="translate(526.8100000000001, 232.64)" text-anchor="middle">60 Year Lifespan</text><text transform="translate(-47.501999999999995, 98.82) rotate(-90)" text-anchor="middle">Metric Tons (tCO?e)</text><path d="M0,64.30634988268162L9.286889095127611,63.486287579325236L18.54840417633411,62.66622527596881L27.809919257540603,61.84616297261244L37.0714343387471,61.02610066925604L46.35832343387471,60.20603836589971L55.619838515081206,59.385976062543314L64.88135359628771,58.56591375918691L74.1428686774942,57.74585145583052L83.42975777262181,56.92578915247414L92.69127285382831,56.105726849117765L101.95278793503482,55.285664545761364L111.21430301624132,54.46560224240499L120.50119211136892,53.64553993904857L129.76270719257542,52.825477635692195L139.0242222737819,52.00541533233582L148.2857373549884,51.18535302897946L157.57262645011602,50.36529072562307L166.83414153132253,49.54522842226669L176.095656612529,48.713218515970574L185.35717169373552,47.89315621261418L194.64406078886316,47.0730939092578L203.90557587006964,46.253031605901405L213.16709095127615,45.432969302545025L222.42860603248263,44.61290699918865L231.71549512761024,43.79284469583226L240.97701020881672,42.97278239247588L250.23852529002323,42.15272008911946L259.5000403712297,41.332657785763104L268.7869294663573,40.51259548240671L278.0484445475638,39.69253317905033L287.30995962877034,38.872470875693956L296.5714747099768,38.052408572337555L305.85836380510443,37.23234626898118L315.11987888631097,36.41228396562479L324.38139396751745,35.59222166226841L333.64290904872394,34.77215935891201L342.92979814385154,33.95209705555563L352.191313225058,33.13203475219924L361.4528283062645,32.2982327054622L370.71434338747105,31.478170109275034L380.00123248259865,30.65810779875754L389.26274756380514,29.838045488239985L398.5242626450117,29.01798317772247L407.7857777262181,28.197920867204935L417.07266682134576,27.37785855668738L426.3341819025523,26.55779624616987L435.5956969837587,25.737733935652308L444.85721206496527,24.917671625134776L454.1441011600928,24.097609314617262L463.40561624129936,23.27754700409968L472.66713132250584,22.45748469358217L481.9286464037124,21.637422383064656L491.21553549884,20.81736007254712L500.47705058004647,19.997297762029607L509.73856566125295,19.17723545151203L519.0000807424594,18.357173140994515L528.2869698375871,17.53711083047696L537.5484849187935,16.717048519959423L546.8100000000001,15.896986209441867" stroke="#8a97a2" stroke-width="2" stroke-dasharray="8" fill="none"></path><circle cx="0" cy="64.30634988268162" r="5" fill="#8a97a2"></circle><path d="M0,196.8014284782892L9.286889095127611,196.6828968602209L18.54840417633411,196.56132090783493L27.809919257540603,196.43663598342403L37.0714343387471,196.30879120093445L46.35832343387471,196.16917712764405L55.619838515081206,196.02635084176706L64.88135359628771,195.88031489475816L74.1428686774942,195.73109352459153L83.42975777262181,195.57873435818414L92.69127285382831,195.42459978613743L101.95278793503482,195.2674984074348L111.21430301624132,195.1075555532495L120.50119211136892,194.94492375663077L129.76270719257542,194.77978265271676L139.0242222737819,194.60739263473107L148.2857373549884,194.43293087135882L157.57262645011602,194.2566524113924L166.83414153132253,194.07883364970044L176.095656612529,193.89976955214945L185.35717169373552,193.71506000922014L194.64406078886316,193.52973742325085L203.90557587006964,193.3441315456945L213.16709095127615,193.15857573537673L222.42860603248263,192.97340271251124L231.71549512761024,192.79322177541567L240.97701020881672,192.61407036630513L250.23852529002323,192.43625454835106L259.5000403712297,192.26006403631004L268.7869294663573,192.08576908999027L278.0484445475638,191.9153738967829L287.30995962877034,191.74734644953895L296.5714747099768,191.58188501946088L305.85836380510443,191.41916115169013L315.11987888631097,191.25931920659173L324.38139396751745,191.11038239334403L333.64290904872394,190.96453532388858L342.92979814385154,190.82184288712875L352.191313225058,190.6823455272601L361.4528283062645,190.54606078856008L370.71434338747105,190.41671908356903L380.00123248259865,190.29056358153056L389.26274756380514,190.16755423685882L398.5242626450117,190.04763582455604L407.7857777262181,189.93073997497615L417.07266682134576,189.8268334338361L426.3341819025523,189.72578114560503L435.5956969837587,189.62748687321147L444.85721206496527,189.53184859691672L454.1441011600928,189.4387600489655L463.40561624129936,189.35410162247183L472.66713132250584,189.27177305447162L481.9286464037124,189.19166307936243L491.21553549884,189.11366086205163L500.47705058004647,189.03765681494832L509.73856566125295,188.97627086230466L519.0000807424594,188.91667028814615L528.2869698375871,188.85875292448614L537.5484849187935,188.80241994375737L546.8100000000001,188.74757613914343" stroke="#00a25f" stroke-width="2" fill="none"></path><circle cx="0" cy="196.8014284782892" r="5" fill="#00a25f"></circle><path class="area" d="M0,64.30634988268162L9.286889095127611,63.486287579325236L18.54840417633411,62.66622527596881L27.809919257540603,61.84616297261244L37.0714343387471,61.02610066925604L46.35832343387471,60.20603836589971L55.619838515081206,59.385976062543314L64.88135359628771,58.56591375918691L74.1428686774942,57.74585145583052L83.42975777262181,56.92578915247414L92.69127285382831,56.105726849117765L101.95278793503482,55.285664545761364L111.21430301624132,54.46560224240499L120.50119211136892,53.64553993904857L129.76270719257542,52.825477635692195L139.0242222737819,52.00541533233582L148.2857373549884,51.18535302897946L157.57262645011602,50.36529072562307L166.83414153132253,49.54522842226669L176.095656612529,48.713218515970574L185.35717169373552,47.89315621261418L194.64406078886316,47.0730939092578L203.90557587006964,46.253031605901405L213.16709095127615,45.432969302545025L222.42860603248263,44.61290699918865L231.71549512761024,43.79284469583226L240.97701020881672,42.97278239247588L250.23852529002323,42.15272008911946L259.5000403712297,41.332657785763104L268.7869294663573,40.51259548240671L278.0484445475638,39.69253317905033L287.30995962877034,38.872470875693956L296.5714747099768,38.052408572337555L305.85836380510443,37.23234626898118L315.11987888631097,36.41228396562479L324.38139396751745,35.59222166226841L333.64290904872394,34.77215935891201L342.92979814385154,33.95209705555563L352.191313225058,33.13203475219924L361.4528283062645,32.2982327054622L370.71434338747105,31.478170109275034L380.00123248259865,30.65810779875754L389.26274756380514,29.838045488239985L398.5242626450117,29.01798317772247L407.7857777262181,28.197920867204935L417.07266682134576,27.37785855668738L426.3341819025523,26.55779624616987L435.5956969837587,25.737733935652308L444.85721206496527,24.917671625134776L454.1441011600928,24.097609314617262L463.40561624129936,23.27754700409968L472.66713132250584,22.45748469358217L481.9286464037124,21.637422383064656L491.21553549884,20.81736007254712L500.47705058004647,19.997297762029607L509.73856566125295,19.17723545151203L519.0000807424594,18.357173140994515L528.2869698375871,17.53711083047696L537.5484849187935,16.717048519959423L546.8100000000001,15.896986209441867L546.8100000000001,188.74757613914343L537.5484849187935,188.80241994375737L528.2869698375871,188.85875292448614L519.0000807424594,188.91667028814615L509.73856566125295,188.97627086230466L500.47705058004647,189.03765681494832L491.21553549884,189.11366086205163L481.9286464037124,189.19166307936243L472.66713132250584,189.27177305447162L463.40561624129936,189.35410162247183L454.1441011600928,189.4387600489655L444.85721206496527,189.53184859691672L435.5956969837587,189.62748687321147L426.3341819025523,189.72578114560503L417.07266682134576,189.8268334338361L407.7857777262181,189.93073997497615L398.5242626450117,190.04763582455604L389.26274756380514,190.16755423685882L380.00123248259865,190.29056358153056L370.71434338747105,190.41671908356903L361.4528283062645,190.54606078856008L352.191313225058,190.6823455272601L342.92979814385154,190.82184288712875L333.64290904872394,190.96453532388858L324.38139396751745,191.11038239334403L315.11987888631097,191.25931920659173L305.85836380510443,191.41916115169013L296.5714747099768,191.58188501946088L287.30995962877034,191.74734644953895L278.0484445475638,191.9153738967829L268.7869294663573,192.08576908999027L259.5000403712297,192.26006403631004L250.23852529002323,192.43625454835106L240.97701020881672,192.61407036630513L231.71549512761024,192.79322177541567L222.42860603248263,192.97340271251124L213.16709095127615,193.15857573537673L203.90557587006964,193.3441315456945L194.64406078886316,193.52973742325085L185.35717169373552,193.71506000922014L176.095656612529,193.89976955214945L166.83414153132253,194.07883364970044L157.57262645011602,194.2566524113924L148.2857373549884,194.43293087135882L139.0242222737819,194.60739263473107L129.76270719257542,194.77978265271676L120.50119211136892,194.94492375663077L111.21430301624132,195.1075555532495L101.95278793503482,195.2674984074348L92.69127285382831,195.42459978613743L83.42975777262181,195.57873435818414L74.1428686774942,195.73109352459153L64.88135359628771,195.88031489475816L55.619838515081206,196.02635084176706L46.35832343387471,196.16917712764405L37.0714343387471,196.30879120093445L27.809919257540603,196.43663598342403L18.54840417633411,196.56132090783493L9.286889095127611,196.6828968602209L0,196.8014284782892Z" fill="#8a97a2" style="opacity: 0.2;"></path><path class="area" d="M0,64.30634988268162L9.286889095127611,63.486287579325236L18.54840417633411,62.66622527596881L27.809919257540603,61.84616297261244L37.0714343387471,61.02610066925604L46.35832343387471,60.20603836589971L55.619838515081206,59.385976062543314L64.88135359628771,58.56591375918691L74.1428686774942,57.74585145583052L83.42975777262181,56.92578915247414L92.69127285382831,56.105726849117765L101.95278793503482,55.285664545761364L111.21430301624132,54.46560224240499L120.50119211136892,53.64553993904857L129.76270719257542,52.825477635692195L139.0242222737819,52.00541533233582L148.2857373549884,51.18535302897946L157.57262645011602,50.36529072562307L166.83414153132253,49.54522842226669L176.095656612529,48.713218515970574L185.35717169373552,47.89315621261418L194.64406078886316,47.0730939092578L203.90557587006964,46.253031605901405L213.16709095127615,45.432969302545025L222.42860603248263,44.61290699918865L231.71549512761024,43.79284469583226L240.97701020881672,42.97278239247588L250.23852529002323,42.15272008911946L259.5000403712297,41.332657785763104L268.7869294663573,40.51259548240671L278.0484445475638,39.69253317905033L287.30995962877034,38.872470875693956L296.5714747099768,38.052408572337555L305.85836380510443,37.23234626898118L315.11987888631097,36.41228396562479L324.38139396751745,35.59222166226841L333.64290904872394,34.77215935891201L342.92979814385154,33.95209705555563L352.191313225058,33.13203475219924L361.4528283062645,32.2982327054622L370.71434338747105,31.478170109275034L380.00123248259865,30.65810779875754L389.26274756380514,29.838045488239985L398.5242626450117,29.01798317772247L407.7857777262181,28.197920867204935L417.07266682134576,27.37785855668738L426.3341819025523,26.55779624616987L435.5956969837587,25.737733935652308L444.85721206496527,24.917671625134776L454.1441011600928,24.097609314617262L463.40561624129936,23.27754700409968L472.66713132250584,22.45748469358217L481.9286464037124,21.637422383064656L491.21553549884,20.81736007254712L500.47705058004647,19.997297762029607L509.73856566125295,19.17723545151203L519.0000807424594,18.357173140994515L528.2869698375871,17.53711083047696L537.5484849187935,16.717048519959423L546.8100000000001,15.896986209441867L546.8100000000001,15.896986209441867L537.5484849187935,16.717048519959423L528.2869698375871,17.53711083047696L519.0000807424594,18.357173140994515L509.73856566125295,19.17723545151203L500.47705058004647,19.997297762029607L491.21553549884,20.81736007254712L481.9286464037124,21.637422383064656L472.66713132250584,22.45748469358217L463.40561624129936,23.27754700409968L454.1441011600928,24.097609314617262L444.85721206496527,24.917671625134776L435.5956969837587,25.737733935652308L426.3341819025523,26.55779624616987L417.07266682134576,27.37785855668738L407.7857777262181,28.197920867204935L398.5242626450117,29.01798317772247L389.26274756380514,29.838045488239985L380.00123248259865,30.65810779875754L370.71434338747105,31.478170109275034L361.4528283062645,32.2982327054622L352.191313225058,33.13203475219924L342.92979814385154,33.95209705555563L333.64290904872394,34.77215935891201L324.38139396751745,35.59222166226841L315.11987888631097,36.41228396562479L305.85836380510443,37.23234626898118L296.5714747099768,38.052408572337555L287.30995962877034,38.872470875693956L278.0484445475638,39.69253317905033L268.7869294663573,40.51259548240671L259.5000403712297,41.332657785763104L250.23852529002323,42.15272008911946L240.97701020881672,42.97278239247588L231.71549512761024,43.79284469583226L222.42860603248263,44.61290699918865L213.16709095127615,45.432969302545025L203.90557587006964,46.253031605901405L194.64406078886316,47.0730939092578L185.35717169373552,47.89315621261418L176.095656612529,48.713218515970574L166.83414153132253,49.54522842226669L157.57262645011602,50.36529072562307L148.2857373549884,51.18535302897946L139.0242222737819,52.00541533233582L129.76270719257542,52.825477635692195L120.50119211136892,53.64553993904857L111.21430301624132,54.46560224240499L101.95278793503482,55.285664545761364L92.69127285382831,56.105726849117765L83.42975777262181,56.92578915247414L74.1428686774942,57.74585145583052L64.88135359628771,58.56591375918691L55.619838515081206,59.385976062543314L46.35832343387471,60.20603836589971L37.0714343387471,61.02610066925604L27.809919257540603,61.84616297261244L18.54840417633411,62.66622527596881L9.286889095127611,63.486287579325236L0,64.30634988268162Z" fill="#00a25f" style="opacity: 0.2;"></path><line class="tracker" x1="-2.257229988399072" x2="-2.257229988399072" y1="0" y2="197.64" stroke-dasharray="4" stroke="#82b977" style="opacity: 1;"></line><path d="M0,-8 V8 M-8,0 H8" stroke-width="5" stroke="#00a25f" transform="translate(-2.257229988399072, 197.64)"></path><g class="zero-text" transform="translate(3, 104.30634988268162)" text-anchor="start" font-weight="bold"><rect width="51" height="16" y="-13"></rect><line x1="55" x2="100" y1="-9" y2="-9" stroke="#000" marker-end="url(#arrowhead)"></line><path d="M0,-4 V4 M-4,0 H4" stroke-width="2" stroke="#00a25f" transform="translate(51, 10)"></path><text x="4" y="-1" font-size="10.7"><tspan x="3" fill="#fff">CLIMATE</tspan><tspan x="0" dy="15">POSITIVE</tspan></text></g><text transform="translate(402.5242626450117, 197.64)" class="chart-descriptor-value" font-weight="bold" fill="#8a97a2" text-anchor="middle"><tspan x="0">7883.8</tspan><tspan dx="2"><tspan>tCO?e</tspan></tspan><tspan dy="1em" x="0">NET IMPACT</tspan></text><text transform="translate(4, 46.306349882681616)" class="chart-descriptor-value" font-weight="bold" fill="#8a97a2"><tspan>13504.2</tspan><tspan dx="2"><tspan>tCO?e</tspan></tspan></text><text dx="5" dy="56.306349882681616" transform="rotate(-5.059234120234581)" font-weight="bold" fill="#8a97a2" font-size="10">PROJECT EMISSIONS</text><line x1="546.8100000000001" x2="546.8100000000001" y1="0" y2="197.64" stroke="#999" stroke-width="1.5" stroke-dasharray="8"></line></g>
                </svg>
            </div>
        </div>
    </div>
</div>

<script type="module">
  /* eslint no-undef: 0 */
  /* eslint import/extensions: 0 */
  /* eslint import/no-unresolved: 0 */

  import { schemeYlOrBr } from 'https://cdn.skypack.dev/d3-scale-chromatic@3';

  function loadCharts({ hcChartWidth, d3ChartWidth, chartHeight, print }) {
    return new Promise((resolve, reject) => {
      hcChartWidth *= 1;
      d3ChartWidth *= 1;
      chartHeight *= 1;
      // load bar chart
      const svg = d3.select('.bar-chart').attr('width', d3ChartWidth).attr('height', chartHeight);

      const margin = {
        left: Math.max(d3ChartWidth * 0.1, 60), top: 30, right: d3ChartWidth * 0.05 + 30, bottom: chartHeight * 0.16,
      };
      const w = d3ChartWidth - (margin.left + margin.right);
      const h = chartHeight - (margin.top + margin.bottom);

      const g = svg
        .select('.inner-box')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);
      g.selectAll('*').remove();

      const completionDate = new Date('Thu Apr 01 2027 04:00:00 GMT+0000 (Coordinated Universal Time)');
      const addYearsToDate = (date, yearsToAdd) => {
        const year = completionDate.getFullYear();
        const month = completionDate.getMonth();
        const day = completionDate.getDate();
        return new Date(year + yearsToAdd, month, day);
      };
      const lifespanDate = addYearsToDate(completionDate, 60 - 1);

      let ytp = '?**' || 60 - 1;
      if (ytp === 'N/A') {
        ytp = 1;
      } else if (ytp === '?') {
        ytp = 60 - 1;
      }
      ytp = Math.min(ytp, 60 - 1);

      const yearByYear = JSON.parse('[{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.01053,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-38.18631701779484,"operations":27.147003673900315,"emissions":6071.659841407941,"shadedArea":8889.835000000001,"waterUseCO2Impact":10.016182106666665,"waterUse":8346818.422222221,"overall":6033.473524390146},"year":1,"_id":"68714a2d075bd5b3f3173f23"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.02106,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-43.58393168393001,"operations":54.29400734780063,"emissions":6109.003297844934,"shadedArea":8889.835000000001,"waterUseCO2Impact":20.03236421333333,"waterUse":16693636.844444443,"overall":6065.419366161004},"year":2,"_id":"68714a2d075bd5b3f3173f24"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.03158999999999999,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-49.12017723884697,"operations":81.44101102170094,"emissions":6146.34675428193,"shadedArea":8889.835000000001,"waterUseCO2Impact":30.048546319999993,"waterUse":25040455.266666666,"overall":6097.226577043082},"year":3,"_id":"68714a2d075bd5b3f3173f25"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.04211999999999999,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-54.79799711183783,"operations":108.58801469560126,"emissions":6183.6902107189235,"shadedArea":8889.835000000001,"waterUseCO2Impact":40.06472842666666,"waterUse":33387273.688888885,"overall":6128.892213607085},"year":4,"_id":"68714a2d075bd5b3f3173f26"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.05264999999999999,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-60.61970851846752,"operations":135.73501836950157,"emissions":6221.033667155917,"shadedArea":8889.835000000001,"waterUseCO2Impact":50.08091053333333,"waterUse":41734092.111111104,"overall":6160.4139586374495},"year":5,"_id":"68714a2d075bd5b3f3173f27"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.06317999999999999,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-66.97736212914168,"operations":162.8820220434019,"emissions":6258.37712359291,"shadedArea":8889.835000000001,"waterUseCO2Impact":60.09709263999999,"waterUse":50080910.533333324,"overall":6191.399761463768},"year":6,"_id":"68714a2d075bd5b3f3173f28"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.07370999999999998,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-73.48129135851235,"operations":190.0290257173022,"emissions":6295.720580029903,"shadedArea":8889.835000000001,"waterUseCO2Impact":70.11327474666666,"waterUse":58427728.95555554,"overall":6222.2392886713915},"year":7,"_id":"68714a2d075bd5b3f3173f29"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.08423999999999998,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-80.13138002011934,"operations":217.17602939120252,"emissions":6333.064036466898,"shadedArea":8889.835000000001,"waterUseCO2Impact":80.12945685333332,"waterUse":66774547.37777776,"overall":6252.932656446779},"year":8,"_id":"68714a2d075bd5b3f3173f2a"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.09476999999999998,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-86.92652438107694,"operations":244.32303306510286,"emissions":6370.4074929038925,"shadedArea":8889.835000000001,"waterUseCO2Impact":90.14563895999999,"waterUse":75121365.79999998,"overall":6283.480968522816},"year":9,"_id":"68714a2d075bd5b3f3173f2b"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.10529999999999998,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-93.86455563824552,"operations":271.47003673900315,"emissions":6407.750949340886,"shadedArea":8889.835000000001,"waterUseCO2Impact":100.16182106666665,"waterUse":83468184.22222221,"overall":6313.886393702641},"year":10,"_id":"68714a2d075bd5b3f3173f2c"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.11582999999999999,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-100.88343414674623,"operations":298.61704041290346,"emissions":6445.09440577788,"shadedArea":8889.835000000001,"waterUseCO2Impact":110.1780031733333,"waterUse":91815002.64444444,"overall":6344.210971631133},"year":11,"_id":"68714a2d075bd5b3f3173f2d"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.12635999999999997,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-108.03741314049128,"operations":325.7640440868038,"emissions":6482.437862214873,"shadedArea":8889.835000000001,"waterUseCO2Impact":120.19418527999996,"waterUse":100161821.06666666,"overall":6374.400449074382},"year":12,"_id":"68714a2d075bd5b3f3173f2e"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.13688999999999996,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-115.32078537115085,"operations":352.91104776070415,"emissions":6519.781318651868,"shadedArea":8889.835000000001,"waterUseCO2Impact":130.21036738666663,"waterUse":108508639.48888889,"overall":6404.460533280718},"year":13,"_id":"68714a2d075bd5b3f3173f2f"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.14741999999999997,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-122.72660488930782,"operations":380.0580514346044,"emissions":6557.124775088862,"shadedArea":8889.835000000001,"waterUseCO2Impact":140.2265494933333,"waterUse":116855457.91111112,"overall":6434.398170199554},"year":14,"_id":"68714a2d075bd5b3f3173f30"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.15794999999999995,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-130.24669158848886,"operations":407.2050551085047,"emissions":6594.468231525856,"shadedArea":8889.835000000001,"waterUseCO2Impact":150.24273159999996,"waterUse":125202276.33333334,"overall":6464.221539937367},"year":15,"_id":"68714a2d075bd5b3f3173f31"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.16847999999999996,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-138.09687455687222,"operations":434.35205878240504,"emissions":6631.81168796285,"shadedArea":8889.835000000001,"waterUseCO2Impact":160.25891370666665,"waterUse":133549094.75555557,"overall":6493.714813405977},"year":16,"_id":"68714a2d075bd5b3f3173f32"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.17900999999999997,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-146.0413993006003,"operations":461.49906245630535,"emissions":6669.155144399842,"shadedArea":8889.835000000001,"waterUseCO2Impact":170.2750958133333,"waterUse":141895913.1777778,"overall":6523.113745099242},"year":17,"_id":"68714a2d075bd5b3f3173f33"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.18953999999999996,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-154.06865157593776,"operations":488.6460661302057,"emissions":6706.498600836836,"shadedArea":8889.835000000001,"waterUseCO2Impact":180.29127792,"waterUse":150242731.60000002,"overall":6552.429949260899},"year":18,"_id":"68714a2d075bd5b3f3173f34"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.20006999999999997,"plantOperationalCarbonInTonnes":248.3411849355925,"plants":-162.16604509560716,"operations":515.7930698041059,"emissions":6743.84205727383,"shadedArea":8889.835000000001,"waterUseCO2Impact":190.30746002666666,"waterUse":158589550.02222225,"overall":6581.676012178223},"year":19,"_id":"68714a2d075bd5b3f3173f35"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.21059999999999995,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-170.32014789847653,"operations":542.9400734780063,"emissions":6781.729575775475,"shadedArea":8889.835000000001,"waterUseCO2Impact":200.32364213333335,"waterUse":166936368.44444448,"overall":6611.409427876998},"year":20,"_id":"68714a2d075bd5b3f3173f36"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.22112999999999997,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-178.73132927048533,"operations":570.0870771519067,"emissions":6819.073032212468,"shadedArea":8889.835000000001,"waterUseCO2Impact":210.33982424,"waterUse":175283186.8666667,"overall":6640.341702941983},"year":21,"_id":"68714a2d075bd5b3f3173f37"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.23165999999999998,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-187.17042699222023,"operations":597.2340808258069,"emissions":6856.416488649463,"shadedArea":8889.835000000001,"waterUseCO2Impact":220.3560063466667,"waterUse":183630005.28888893,"overall":6669.2460616572425},"year":22,"_id":"68714a2d075bd5b3f3173f38"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.24218999999999996,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-195.6224250594484,"operations":624.3810844997072,"emissions":6893.759945086456,"shadedArea":8889.835000000001,"waterUseCO2Impact":230.37218845333337,"waterUse":191976823.71111116,"overall":6698.137520027008},"year":23,"_id":"68714a2d075bd5b3f3173f39"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.25271999999999994,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-204.07214319778063,"operations":651.5280881736076,"emissions":6931.10340152345,"shadedArea":8889.835000000001,"waterUseCO2Impact":240.38837056000003,"waterUse":200323642.13333338,"overall":6727.031258325669},"year":24,"_id":"68714a2d075bd5b3f3173f3a"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.26324999999999993,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-212.50443021351336,"operations":678.6750918475078,"emissions":6968.4468579604445,"shadedArea":8889.835000000001,"waterUseCO2Impact":250.40455266666672,"waterUse":208670460.5555556,"overall":6755.942427746932},"year":25,"_id":"68714a2d075bd5b3f3173f3b"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.2737799999999999,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-220.70939091913897,"operations":705.8220955214083,"emissions":7005.790314397438,"shadedArea":8889.835000000001,"waterUseCO2Impact":260.4207347733334,"waterUse":217017278.97777784,"overall":6785.080923478299},"year":26,"_id":"68714a2d075bd5b3f3173f3c"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.2843099999999999,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-228.86746965823664,"operations":732.9690991953086,"emissions":7043.133770834432,"shadedArea":8889.835000000001,"waterUseCO2Impact":270.43691688,"waterUse":225364097.40000007,"overall":6814.266301176195},"year":27,"_id":"68714a2d075bd5b3f3173f3d"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.2948399999999999,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-236.96472912791086,"operations":760.1161028692088,"emissions":7080.477227271426,"shadedArea":8889.835000000001,"waterUseCO2Impact":280.4530989866667,"waterUse":233710915.8222223,"overall":6843.512498143515},"year":28,"_id":"68714a2d075bd5b3f3173f3e"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.3053699999999998,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-244.9879764886139,"operations":787.2631065431092,"emissions":7117.82068370842,"shadedArea":8889.835000000001,"waterUseCO2Impact":290.4692810933334,"waterUse":242057734.24444452,"overall":6872.832707219806},"year":29,"_id":"68714a2d075bd5b3f3173f3f"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.3158999999999998,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-252.92490482740055,"operations":814.4101102170094,"emissions":7155.1641401454135,"shadedArea":8889.835000000001,"waterUseCO2Impact":300.4854632000001,"waterUse":250404552.66666675,"overall":6902.239235318013},"year":30,"_id":"68714a2d075bd5b3f3173f40"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.3264299999999998,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-260.68424878037627,"operations":841.5571138909098,"emissions":7192.507596582407,"shadedArea":8889.835000000001,"waterUseCO2Impact":310.5016453066667,"waterUse":258751371.08888897,"overall":6931.823347802031},"year":31,"_id":"68714a2d075bd5b3f3173f41"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.33695999999999976,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-268.3357718789179,"operations":868.7041175648101,"emissions":7229.851053019401,"shadedArea":8889.835000000001,"waterUseCO2Impact":320.5178274133334,"waterUse":267098189.5111112,"overall":6961.515281140483},"year":32,"_id":"68714a2d075bd5b3f3173f42"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.34748999999999974,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-275.87044537974117,"operations":895.8511212387103,"emissions":7267.194509456395,"shadedArea":8889.835000000001,"waterUseCO2Impact":330.5340095200001,"waterUse":275445007.9333334,"overall":6991.3240640766535},"year":33,"_id":"68714a2d075bd5b3f3173f43"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.35801999999999967,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-283.2804575733085,"operations":922.9981249126107,"emissions":7304.537965893389,"shadedArea":8889.835000000001,"waterUseCO2Impact":340.55019162666673,"waterUse":283791826.3555556,"overall":7021.25750832008},"year":34,"_id":"68714a2d075bd5b3f3173f44"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.36854999999999966,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-290.55923467250693,"operations":950.145128586511,"emissions":7341.881422330383,"shadedArea":8889.835000000001,"waterUseCO2Impact":350.5663737333334,"waterUse":292138644.7777778,"overall":7051.322187657876},"year":35,"_id":"68714a2d075bd5b3f3173f45"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.37907999999999964,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-297.3414210681224,"operations":977.2921322604114,"emissions":7379.224878767377,"shadedArea":8889.835000000001,"waterUseCO2Impact":360.5825558400001,"waterUse":300485463.2,"overall":7081.883457699255},"year":36,"_id":"68714a2d075bd5b3f3173f46"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.3896099999999996,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-303.9829087482427,"operations":1004.4391359343117,"emissions":7416.568335204371,"shadedArea":8889.835000000001,"waterUseCO2Impact":370.5987379466668,"waterUse":308832281.6222222,"overall":7112.5854264561285},"year":37,"_id":"68714a2d075bd5b3f3173f47"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.4001399999999996,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-310.4807428447742,"operations":1031.5861396082119,"emissions":7453.911791641364,"shadedArea":8889.835000000001,"waterUseCO2Impact":380.61492005333344,"waterUse":317179100.0444444,"overall":7143.43104879659},"year":38,"_id":"68714a2d075bd5b3f3173f48"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.41066999999999954,"plantOperationalCarbonInTonnes":248.88524700024252,"plants":-316.8330816366062,"operations":1058.7331432821122,"emissions":7491.255248078359,"shadedArea":8889.835000000001,"waterUseCO2Impact":390.6311021600001,"waterUse":325525918.4666666,"overall":7174.422166441752},"year":39,"_id":"68714a2d075bd5b3f3173f49"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.4211999999999995,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-323.03912620400206,"operations":1085.8801469560126,"emissions":7529.2243758897,"shadedArea":8889.835000000001,"waterUseCO2Impact":400.6472842666668,"waterUse":333872736.8888888,"overall":7206.185249685699},"year":40,"_id":"68714a2d075bd5b3f3173f4a"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.4317299999999995,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-328.9290034804628,"operations":1113.0271639999999,"emissions":7566.567845661428,"shadedArea":8889.835000000001,"waterUseCO2Impact":410.66346637333345,"waterUse":342219555.311111,"overall":7237.638842180964},"year":41,"_id":"68714a2d075bd5b3f3173f4b"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.4422599999999995,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-334.67378954778746,"operations":1140.174168,"emissions":7603.91130242452,"shadedArea":8889.835000000001,"waterUseCO2Impact":420.67964848000014,"waterUse":350566373.7333332,"overall":7269.237512876733},"year":42,"_id":"68714a2d075bd5b3f3173f4c"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.45278999999999947,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-340.2753079754629,"operations":1167.321172,"emissions":7641.254759187614,"shadedArea":8889.835000000001,"waterUseCO2Impact":430.69583058666683,"waterUse":358913192.15555537,"overall":7300.979451212151},"year":43,"_id":"68714a2d075bd5b3f3173f4d"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.4633199999999994,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-345.73607356302136,"operations":1194.4681759999999,"emissions":7678.5982159507075,"shadedArea":8889.835000000001,"waterUseCO2Impact":440.7120126933335,"waterUse":367260010.57777756,"overall":7332.862142387687},"year":44,"_id":"68714a2d075bd5b3f3173f4e"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.4738499999999994,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-351.05919968232394,"operations":1221.61518,"emissions":7715.9416727138005,"shadedArea":8889.835000000001,"waterUseCO2Impact":450.72819480000015,"waterUse":375606828.99999976,"overall":7364.882473031477},"year":45,"_id":"68714a2d075bd5b3f3173f4f"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.48437999999999937,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-355.7908272387936,"operations":1248.762184,"emissions":7753.285129476895,"shadedArea":8889.835000000001,"waterUseCO2Impact":460.74437690666684,"waterUse":383953647.42222196,"overall":7397.494302238101},"year":46,"_id":"68714a2d075bd5b3f3173f50"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.49490999999999935,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-360.39247970833156,"operations":1275.9091879999999,"emissions":7790.628586239988,"shadedArea":8889.835000000001,"waterUseCO2Impact":470.76055901333353,"waterUse":392300465.84444416,"overall":7430.236106531656},"year":47,"_id":"68714a2d075bd5b3f3173f51"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5054399999999993,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-364.8685394712445,"operations":1303.056192,"emissions":7827.972043003082,"shadedArea":8889.835000000001,"waterUseCO2Impact":480.77674112000017,"waterUse":400647284.26666635,"overall":7463.103503531837},"year":48,"_id":"68714a2d075bd5b3f3173f52"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5159699999999994,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-369.22365223512077,"operations":1330.203196,"emissions":7865.315499766176,"shadedArea":8889.835000000001,"waterUseCO2Impact":490.79292322666686,"waterUse":408994102.68888855,"overall":7496.0918475310555},"year":49,"_id":"68714a2d075bd5b3f3173f53"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5264999999999993,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-373.4626571509324,"operations":1357.3501999999999,"emissions":7902.658956529269,"shadedArea":8889.835000000001,"waterUseCO2Impact":500.80910533333355,"waterUse":417340921.11111075,"overall":7529.196299378336},"year":50,"_id":"68714a2d075bd5b3f3173f54"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5370299999999993,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-377.3177767544694,"operations":1384.497204,"emissions":7940.002413292364,"shadedArea":8889.835000000001,"waterUseCO2Impact":510.82528744000024,"waterUse":425687739.53333294,"overall":7562.684636537894},"year":51,"_id":"68714a2d075bd5b3f3173f55"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5475599999999993,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-381.06680079819455,"operations":1411.644208,"emissions":7977.3458700554565,"shadedArea":8889.835000000001,"waterUseCO2Impact":520.8414695466669,"waterUse":434034557.95555514,"overall":7596.279069257262},"year":52,"_id":"68714a2d075bd5b3f3173f56"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5580899999999992,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-384.71479602174725,"operations":1438.7912119999999,"emissions":8014.68932681855,"shadedArea":8889.835000000001,"waterUseCO2Impact":530.8576516533336,"waterUse":442381376.37777734,"overall":7629.974530796803},"year":53,"_id":"68714a2d075bd5b3f3173f57"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5686199999999992,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-388.26680956049006,"operations":1465.938216,"emissions":8052.032783581643,"shadedArea":8889.835000000001,"waterUseCO2Impact":540.8738337600001,"waterUse":450728194.79999954,"overall":7663.765974021153},"year":54,"_id":"68714a2e075bd5b3f3173f58"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5791499999999992,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-391.72783174187964,"operations":1493.08522,"emissions":8089.376240344736,"shadedArea":8889.835000000001,"waterUseCO2Impact":550.8900158666668,"waterUse":459075013.22222173,"overall":7697.648408602857},"year":55,"_id":"68714a2e075bd5b3f3173f59"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.5896799999999992,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-394.5231847766538,"operations":1520.2322239999999,"emissions":8126.71969710783,"shadedArea":8889.835000000001,"waterUseCO2Impact":560.9061979733334,"waterUse":467421831.6444439,"overall":7732.196512331176},"year":56,"_id":"68714a2e075bd5b3f3173f5a"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.6002099999999991,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-397.23723642321636,"operations":1547.379228,"emissions":8164.063153870924,"shadedArea":8889.835000000001,"waterUseCO2Impact":570.92238008,"waterUse":475768650.0666661,"overall":7766.825917447707},"year":57,"_id":"68714a2e075bd5b3f3173f5b"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.6107399999999991,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-399.8746391399752,"operations":1574.526232,"emissions":8201.406610634018,"shadedArea":8889.835000000001,"waterUseCO2Impact":580.9385621866667,"waterUse":484115468.4888883,"overall":7801.531971494042},"year":58,"_id":"68714a2e075bd5b3f3173f5c"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.6212699999999991,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-402.4398932715219,"operations":1601.6732359999999,"emissions":8238.750067397112,"shadedArea":8889.835000000001,"waterUseCO2Impact":590.9547442933333,"waterUse":492462286.9111105,"overall":7836.310174125589},"year":59,"_id":"68714a2e075bd5b3f3173f5d"},{"totals":{"materials":5785.975200035355,"materialCarbonStoredInTonnes":-12.40653078946944,"plantCarbonStoredInTonnes":0.631799999999999,"plantOperationalCarbonInTonnes":249.51091837459003,"plants":-404.93733428308497,"operations":1628.82024,"emissions":8276.093524160206,"shadedArea":8889.835000000001,"waterUseCO2Impact":600.9709263999998,"waterUse":500809105.3333327,"overall":7871.15618987712},"year":60,"_id":"68714a2e075bd5b3f3173f5e"}]');
      const data = yearByYear.map((x) => ({
        ...x,
        year: addYearsToDate(completionDate, x.year - 1),
      }));



      const yearPositive = '2027';
      let yearPositiveDate;
      if (yearPositive) {
        yearPositiveDate = new Date(+yearPositive, 0, 2);
      } else if (ytp === 0) {
        yearPositiveDate = data[0]?.year;
      } else {
        yearPositiveDate = lifespanDate;
      }

      const xValue = (d) => d.year;

      // the values in plants and materials are kg co2, the values should be in 1000 kg co2
      // https://climatepositivedesign.atlassian.net/browse/PAT-304
      const sequestrationValue = (d) => {
        return ((d?.totals?.plants || 0) / 1000) * -1;
      }
      const emissionsValue = (d) => ((d?.totals?.emissions || 0)) / 1000;

      const extent = d3.extent(data.map((d) => [sequestrationValue(d), emissionsValue(d)]).flat());

      const xScale = d3.scaleTime().domain([completionDate, lifespanDate]).range([0, w]);
      const yScale = d3.scaleLinear().domain(extent).range([h, 0]).nice();

      // X AXIS
      const xAxis = d3.axisBottom(xScale).ticks(10);
      g.append('g').attr('class', 'x axis').attr('transform', `translate(0, ${h})`).call(xAxis);

      // const xAxisLabel = g.append('text')
      //   .attr('transform', `translate(${w / 2}, ${chartHeight - margin.bottom + chartHeight * 0.03 + 10})`)
      //   .attr('text-anchor', 'middle')
      //   .text('Year')
      // .attr('font-size', 14)

      // Y AXIS
      const yAxis = d3.axisLeft(yScale).ticks(8).tickFormat((x) => {
        return d3.format(".3s")(x);
      });
      g.append('g').attr('class', 'y axis').call(yAxis);

      g.append('text')
        .attr('class', 'x-axis-label')
        .attr('transform', `translate(0, ${h + 35})`)
        .text('Construction Completion')
        .attr('text-anchor', 'middle');

      g.append('text')
        .attr('class', 'x-axis-label')
        .attr('transform', `translate(${w - 20}, ${h + 35})`)
        .text('60 Year Lifespan')
        .attr('text-anchor', 'middle');

      g.append('text')
        .attr('transform', `translate(${-margin.left * 0.7}, ${h / 2}) rotate(-90)`)
        .attr('text-anchor', 'middle')
        .text('Metric Tons (tCO?e)');

      // EMISSIONS LINE AND CIRCLE
      //const embodiedColor = '#f92d34';
      const embodiedColor = '#8a97a2';
      g.append('path')
        .datum(data)
        .attr('d', d3.line().x((d) => xScale(xValue(d))).y((d) => yScale(emissionsValue(d))))
        .attr('stroke', embodiedColor)
        .attr('stroke-width', 2)
        .attr('stroke-dasharray', 8)
        .attr('fill', 'none');
      g.append('circle')
        .attr('cx', 0)
        .attr('cy', yScale(emissionsValue(data[0])))
        .attr('r', 5)
        .attr('fill', embodiedColor);

      // SEQUESTRATION LINE AND CIRCLE
      const gwpColor = '#00a25f';
      g.append('path')
        .datum(data)
        .attr('d', d3.line()
          .x((d) => xScale(xValue(d)))
          .y((d) => {
            return yScale(sequestrationValue(d))
          })
        )
        .attr('stroke', gwpColor)
        .attr('stroke-width', 2)
        .attr('fill', 'none');
      g.append('circle')
        .attr('cx', 0)
        .attr('cy', yScale(sequestrationValue(data[0])))
        .attr('r', 5)
        .attr('fill', gwpColor);

      // EMBODIED AREA
      const embodiedArea = d3.area()
        .x((d) => xScale(xValue(d)))
        .y0((d) => yScale(sequestrationValue(d)))
        .y1((d) => Math.min(yScale(emissionsValue(d)), yScale(sequestrationValue(d))))
      g.append('path')
        .data([data])
        .attr('class', 'area')
        .attr('d', embodiedArea)
        .attr('fill', embodiedColor)
        .style('opacity', 0.2);

      // SEQUESTERED AREA
      const sequesteredArea = d3.area()
        .x((d) => xScale(xValue(d)))
        .y0((d) => {
          return Math.min(yScale(sequestrationValue(d)), yScale(emissionsValue(d)))
        })
        .y1((d) => yScale(emissionsValue(d)))
      g.append('path')
        .data([data])
        .attr('class', 'area')
        .attr('d', sequesteredArea)
        .attr('fill', gwpColor)
        .style('opacity', 0.2);

      // ZERO LINE
      if (yearPositiveDate < lifespanDate) {
        const trackerColor = '#82b977';
        // vertical zero line
        g.append('line')
          .attr('class', 'tracker')
          .style('opacity', 0)
          .attr('x1', xScale(yearPositiveDate))
          .attr('x2', xScale(yearPositiveDate))
          .attr('y1', 0)
          .attr('y2', h)
          .attr('stroke-dasharray', 4)
          .attr('stroke', trackerColor);
        // plus symbol
        g.append('path')
          .attr('d', 'M0,-8 V8 M-8,0 H8') // draw a plus
          .attr('stroke-width', 5)
          .attr('stroke', gwpColor)
          .attr('transform', `translate(${xScale(yearPositiveDate)}, ${yScale(emissionsValue(data[ytp]))})`);

        // depending on space below the embodied line, shift the zero text below or above.
        let zeroTextYPosition;
        // if (ytp < 4) {
        //   zeroTextYPosition = yScale(emissionsValue(data[0])) - 45
        // } else if (yScale(0) - yScale(emissionsValue(data[0])) > 35) {
        //   zeroTextYPosition = yScale(emissionsValue(data[0])) + 19
        // } else {
        //   zeroTextYPosition = yScale(emissionsValue(data[0])) - 35
        // }
        if (ytp < 40) {
          zeroTextYPosition = yScale(emissionsValue(data[0])) + 19;
        } else {
          zeroTextYPosition = yScale(emissionsValue(data[0])) + 40;
        }
        if (zeroTextYPosition > (h - 40)) {
          zeroTextYPosition = yScale(emissionsValue(data[0])) - 55;
        }
        const zeroTextXPosition = Math.max(3, xScale(yearPositiveDate) - 25);
        // zero text
        g.append('g')
          .attr('class', 'zero-text')
          .attr('transform', `translate(${zeroTextXPosition}, ${zeroTextYPosition})`)
          .attr('text-anchor', 'start')
          .attr('font-weight', 'bold')
          // .attr('font-size', 15)
          // .call(g => g.append('tspan').text('Carbon neutral in '))
          // .call(g => g.append('tspan').attr('font-weight', 'bold').text(yearPositiveDate.getFullYear()))
          .call((_g) => _g.append('rect')
            .attr('width', 51)
            .attr('height', 16)
            .attr('y', -13))
          .call((_g) => _g.append('line')
            .attr('x1', 55)
            .attr('x2', 100)
            .attr('y1', -9)
            .attr('y2', -9)
            .attr('stroke', '#000')
            .attr('marker-end', 'url(#arrowhead)'))
          .call((_g) => _g.append('path')
            .attr('d', 'M0,-4 V4 M-4,0 H4') // draw a plus
            .attr('stroke-width', 2)
            .attr('stroke', gwpColor)
            .attr('transform', 'translate(51, 10)'))
          .call((_g) => _g.append('text')
            .attr('x', 4)
            .attr('y', -1)
            .attr('font-size', 10.7)
            .call((text) => text.append('tspan').text('CLIMATE').attr('x', 3).attr('fill', '#fff'))
            .call((text) => text.append('tspan').text('POSITIVE').attr('x', 0).attr('dy', 15)));
      }

      // SEQUESTRATION TEXT

      const getLineAngle = (xDifference, yDifference) => {
        // work out predicted line angle
        // tan(?) = opposite / adjacent = yDistance / xDistance
        const xDistance = xDifference;
        const yDistance = Math.abs(yDifference);
        const tanTheta = yDistance / xDistance;

        const theta = Math.atan(tanTheta) * (180 / Math.PI);
        return theta * Math.sign(yDifference);
      };
      // let textYear = Math.round(+ytp + ((50 - +ytp) / 2))
      // textYear = Math.min(textYear, 35)
      const textYear = Math.min(Math.max(ytp, 43), 45);
      const textFullYear = completionDate.getFullYear() + (textYear || 43);
      const textDatapoint = data.find((d) => d.year.getFullYear() === textFullYear);

      const totalImpact = +'7883.834';
      const impactColor = totalImpact <= 0 ? gwpColor : embodiedColor;
      const textHorizontalPoint = xScale(xValue(textDatapoint));
      // get midpoint between y value of both lines to place the net impact text
      const getTextVerticalPoint = () => {
        const emi = yScale(emissionsValue(data[textYear]));
        const seq = yScale(sequestrationValue(data[textYear]));
        const diff = Math.abs(emi - seq);
        const heightOfLabel = 30;
        if (ytp < 40 || !ytp || ytp >= 60  - 1) {
          return Math.min(emi, seq) + (diff / 2) - (heightOfLabel / 2);
        }
        return Math.max(emi, seq) + (heightOfLabel / 2);
      };
      const textVerticalPoint = getTextVerticalPoint();
      if (textDatapoint) {
        g.append('text')
          .attr('transform', `translate(${textHorizontalPoint + 4}, ${textVerticalPoint + 15})`)
          .attr('class', 'chart-descriptor-value')
          .attr('font-weight', 'bold')
          .attr('fill', impactColor)
          .attr('text-anchor', 'middle')
          .call((text) => text.append('tspan')
            .attr('x', 0)
            .text(() => Math.round(totalImpact * 10) / 10))
          .call((text) => text.append('tspan')
            .attr('dx', 2)
            .call((tspan) => tspan.append('tspan')
              .text('tCO?e')))
          .call((text) =>
            text.append('tspan').attr("dy", "1em").attr('x', 0).text(() => 'NET IMPACT')
          );

      }
      if (ytp) {
        const sequestrationLineAngle = getLineAngle(
          Math.abs(xScale(lifespanDate) - xScale(xValue(data[ytp - 1]))),
          yScale(sequestrationValue(data[data.length - 1])) - yScale(sequestrationValue(data[ytp - 1])),
        );

        g.append('text')
          // .attr('transform', `translate(${xScale(xValue(textDatapoint))}, ${yScale(emissionsValue(data[0]))+ 32}) rotate(0)`)
          .attr('dy', yScale(emissionsValue(data[0])) - 8)
          .attr('dx', xScale(xValue(textDatapoint)))
          .attr('class', 'chart-descriptor')
          .attr('font-weight', 'bold')
          .attr('text-anchor', 'middle')
          .attr('fill', gwpColor)
          .text('PROJECT SEQUESTRATION');
      }

      // EMBODIED TEXT
      g.append('text')
        .attr('transform', `translate(4, ${yScale(emissionsValue(data[0])) - 18})`)
        .attr('class', 'chart-descriptor-value')
        .attr('font-weight', 'bold')
        .attr('fill', embodiedColor)
        .call((text) => text.append('tspan')
          .text(Math.round(JSON.parse('13504.177443659968') * 10) / 10))
        .call((text) => text.append('tspan')
          .attr('dx', 2)
          .call((tspan) => tspan.append('tspan')
            .text('tCO?e')));
      const emissionsLineAngle = getLineAngle(
        Math.abs(xScale(lifespanDate) - xScale(completionDate)),
        yScale(emissionsValue(data[data.length - 1])) - yScale(emissionsValue(data[0])),
      );
      g.append('text')
        .attr('dx', 5)
        .attr('dy', yScale(emissionsValue(data[0])) - 8)
        // .attr('transform', `translate(40, ${yScale(emissionsValue(data[0])) - 10}) rotate(${emissionsLineAngle})`)
        .attr('transform', `rotate(${emissionsLineAngle})`)
        .attr('font-weight', 'bold')
        .attr('fill', embodiedColor)
        // .attr('class', 'chart-descriptor')
        .text('PROJECT EMISSIONS')
        .attr('font-size', 10);

      const lifespanColor = '#999';
      // lifespan line
      g.append('line')
        .attr('x1', xScale(lifespanDate))
        .attr('x2', xScale(lifespanDate))
        .attr('y1', 0)
        .attr('y2', h)
        .attr('stroke', lifespanColor)
        .attr('stroke-width', 1.5)
        .attr('stroke-dasharray', 8);
      // const lifespanRect = g.append('rect')
      //   .attr('transform', `translate(${xScale(lifespanDate) + 5}, 0)`)
      //   .attr('fill', '#fff')
      //   .attr('height', h)
      //   .attr('width', 18)
      // const lifespanText = g.append('text')
      //   .attr('transform', `translate(${xScale(lifespanDate) + 10}, ${h / 2}) rotate(90)`)
      //   .attr('text-anchor', 'middle')
      //   .text('Project lifespan (50 years)')
      //   .attr('fill', lifespanColor)
      //   // .attr('font-size', 15)

      g.selectAll('.tracker').style('opacity', 1);

      // load pie chart
      const emissionTotals = JSON.parse('{"Playground & Athletic":2748000,"Soil Amendments & Mulch":1628820,"Aggregate & Asphalt Hardscape":1184881,"Concrete Hardscape":1142277,"Landscape Water Use":600971,"Site Elements":547853,"Lawn":169811,"Demolition & Site Preparation":102646,"Metal & Wood Hardscape":39359,"Brick & Stone Hardscape":9338,"Furnishings":8711,"Infrastructure & Subsurface":2908,"Shrubs":592}');
      Highcharts.chart('pie-chart', {
        chart: {
          backgroundColor: null,
          plotBackgroundColor: null,
          plotBorderWidth: null,
          plotShadow: false,
          type: 'pie',
          reflow: true,
          height: chartHeight,
          width: hcChartWidth,
          margin: [50, 50, 50, 50]
        },
        colors: (function () {
          // This is generated via AI Assistant
          var colors = [],
            targetColor = chroma("#202528"),
            baseColor = chroma("#d6dade"), // Modify to your target color
            i,
            len = Object.keys(emissionTotals).length; // total number of steps between base and target color

          colors.push(baseColor.hex());
          for (i = 1; i < len; i += 1) {
            // Interpolate between baseColor and targetColor
            colors.push(chroma.mix(baseColor, targetColor, i / (len - 1)).hex());
          }
          return colors;
        }()),
        title: false,
        tooltip: {
          pointFormat: '<b>{point.y} kgCO?e</b>',
        },
        accessibility: {
          point: {
            valueSuffix: '%',
          },
        },
        plotOptions: {
          series: {
            animation: false,
          },
          pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              crop: false,
              overflow: 'allow',
              enabled: true,
              color: '#333333',
              style: {
                fontSize: print ? 12 : 11,
                textOutline: 'none',
              },
              format: '<b>{point.name}</b><br>{point.percentage:.1f} %',
            },
          },
        },
        series: [{
          name: 'Emissions',
          colorByPoint: true,
          fillColor: '#d6dade',
          data: Object.entries(emissionTotals).map(([key, value]) => ({ name: key, y: value })),
        }],
        credits: {
          enabled: false,
        },
      });

      setTimeout(() => {
        resolve();
      }, 1000);
    });
  }

  const loadChartsWithWidths = async () => {
    // TODO: Rewrite this and the pdf rendering logic to better support page width detection.

    // the D3 and HC sizes aren't not being properly sized from the dom.
    // This computes and uses sizes that are related to the columns defined in the
    // scorecard.

    const column1Div = document.getElementById('column1');
    const computedStyle1 = window.getComputedStyle(column1Div);
    const computedWidth1 = computedStyle1.width;

    const columnWidth1 = parseInt(computedWidth1, 10);
    const columnWidth2 = columnWidth1 * 1.3;

    const detailWrapper = document.getElementById('project-details-wrapper');
    const mainWrapper = document.getElementById('main-wrapper');
    const detailHeight = parseInt(detailWrapper.offsetHeight);
    const mainHeight = parseInt(mainWrapper.offsetHeight);
    const mainWidth = parseInt(mainWrapper.offsetWidth);
    const docHeight = document.documentElement.clientHeight;

    // these values will be 0 if the scorecard modal is hidden.
    if (!columnWidth1 || !columnWidth2 || !docHeight) return;

    try {
      // calc(95% - 6.76vw - 64px);
      const verticalSpaceAvailable = docHeight - 10;
      const chartHeightBase = verticalSpaceAvailable - detailHeight - mainHeight;

      // print media doesn't seem to work properly with D3.  It could be that when the pdf render grabs the page
      // a zoom is applied? the 1.4 multiplier seems to adjust the graphs to the correct width.

      await loadCharts({ hcChartWidth: columnWidth1, d3ChartWidth: columnWidth2, chartHeight: chartHeightBase - 60 , print: false});
        // eslint-disable-next-line no-mixed-operators

    } catch (err) {
      console.warn('failed to load charts - %o', err.message);
    }
  };

  window.addEventListener('load', async () => {
    setTimeout(() => {
      loadChartsWithWidths();
      if (window.location.search.includes('print=true')) {
        window.print();
      }
    }, 500);
  });

  window.addEventListener('resize', () => {
    setTimeout(() => {
      loadChartsWithWidths();
    }, 200);
  });
</script>
</body>
