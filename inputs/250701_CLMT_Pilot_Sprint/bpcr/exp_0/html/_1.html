<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&amp;display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://cdnjs.cloudflare.com/ajax/libs/chroma-js/2.4.2/chroma.min.js" integrity="sha512-zInFF17qBFVvvvFpIfeBzo7Tj7+rQxLeTJDmbxjBz5/zIr89YVbTNelNhdTT+/DCrxoVzBeUPVFJsczKbB7sew==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/d3/5.15.1/d3.min.js" integrity="sha256-SQJ/nCYPXFPuqoS56EfnesDBPNiitndOIfN2WdPRi/o=" crossorigin="anonymous"></script>
    <script src="https://code.highcharts.com/highcharts.src.js"></script>
    <script src="https://unpkg.com/browse/human-number@2.0.4/src/index.js"></script>
    <title>Document</title>
    <style>
      html {
        height: 100%;
      }
      body { margin: 0 }
      body {
        height: 100%;
      }
      body * {
        font-family: "roboto";
      }
    
      @page {
          size: A3 landscape;
      }
    
      .score-card {
        box-sizing: border-box;
        width: 100%;
        height: 100%;
        margin: 0 auto;
        padding: 25px 25px;
        font-size: 1.1vw;
        color: #202528;
      }
      .section {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-column-gap: 10%;
          margin-left: 40px;
      }
      .score-card .project-details-wrapper {
          padding-bottom: 10px;
          border-bottom: 1px solid #111;
    
      }
      .score-card .project-details-wrapper .project-details {
        display: grid;
        grid-template-columns: 36em auto 11.03em;
        grid-column-gap: 4%;
        align-items: end;
      }
      .score-card .project-details-wrapper .project-details .project-title {
        margin: 0;
        padding-left: 20px;
        font-size: 1.9em;
        font-weight: initial;
        text-transform: capitalize;
      }
      .score-card .project-details-wrapper .project-details .logo {
          margin: 0;
          width: 100px;
          padding-bottom: 10px;
          transform: translateY(5pt);
      }
      .score-card .project-details-wrapper .project-details .logo img {
          width: 9.03em;
          padding-bottom:25px;
          padding-right:25px;
      }
      .score-card .project-details-wrapper .project-details div > div {
        display: grid;
        grid-template-columns: 10em 1fr;
        grid-column-gap: 10px;
        font-size: 0.8em;
        color: #202528;
      }
      .score-card .project-details-wrapper .project-details div > div span {
        text-align: right;
      }
      .score-card .project-description {
        padding-bottom:3px;
      }
      .score-card .project-details-wrapper .project-details div > div span:nth-of-type(2) {
        text-align: left;
        font-weight: 600;
      }
      .score-card .ok {
        color: #00a25f;
      }
      .score-card .seq {
          color: #00a25f;
      }
    
    </style>
    <style>
      .score-card {
          display: grid;
          padding-top: 40px;
          grid-template-rows: auto auto 1fr;
      }
      .score-card .section-header {
          text-transform: uppercase;
          font-size: 1.1em;
          font-weight: 600;
      }
    
      .score-card .section-header.extra-space {
          margin-top: 16px;
      }
      .score-card .main {
        padding-top: 20px;
        margin-left: 40px;
        margin-right: 40px;
        display: grid;
        grid-template-columns: 40% 50%;
        grid-column-gap: 10%;
      }
      .score-card .data-row {
          display: grid;
          grid-template-columns: 1fr 1fr;
          justify-content: space-between;
          margin: 5px 0;
          font-size: 0.9em;
      }
      .score-card .data-row:has(.title) {
          margin: 11px 0;
      }
      .score-card .data-row > *:nth-child(2) {
         text-align: right;
      }
      .score-card .info-row {
          display: grid;
          grid-template-columns: 1fr;
          justify-content: space-between;
          margin: 5px 0;
          font-size: 0.9em;
      }
      .score-card .info-row:has(.title) {
          margin: 11px 0;
      }
      .score-card .statistics div.title {
        font-size: 1.1em !important;
        font-weight: 600;
      }
      .score-card .benefits.statistics {
          display: grid;
          grid-template-columns: 1fr 1fr;
          grid-column-gap: 10%;
      }
      .score-card .chart-titles span {
        font-size: 1.2em !important;
        font-weight: 600;
      }
      .score-card .impact-chart .chart-titles .years-to-positive {
          margin-left: 20px;
          font-size: 1.6em !important;
      }
      .score-card .impact-chart .chart-titles .years-to-positive .inf-fixed {
          position: relative;
          top: 9px;
      }
      .score-card .impact-chart .chart-titles .years-to-positive .astr-fixed {
          font-size: 0.7em !important;
          position: relative;
          top: -7px;
      }
      .score-card .impact-chart .chart-titles .years-to-positive-text {
          margin-left: 5px;
          font-size: 0.9em !important;
          font-weight: 400;
      }
      .chart-descriptor {
        font-size: 0.7em;
      }
      .chart-descriptor-value {
        font-size: 1.2em;
      }
      .chart-descriptor-value tspan:not(:first-of-type) {
        font-size: 0.45em;
      }
      .x-axis-label {
        font-size: 0.8em;
      }
      .score-card > .charts {
          display: grid;
          margin-top: 8px;
          margin-left: 40px;
          margin-right: 40px;
          grid-column-gap: 10%;
          flex-basis: 50%;
          grid-template-columns: 40% 50%;
      }
      .score-card .impact-chart .bar-chart {
        overflow:visible !important;
      }
      .score-card .emissions-chart {
          width: 100% !important;
          margin-top: 10px;
          overflow: visible !important;
      }
      .pie-chart {
        overflow: visible !important;
      }
      .highcharts-container {
        margin: 0 40px 0 40px;
        padding: 0;
        overflow: visible !important;
      }
      svg { overflow: visible; !important;}
    </style>
</head>
<body>

<div class="score-card" ref="scorecard" :style="{ 'font-size': fontSize; page-break-inside: avoid; }">
    <div class="project-details-wrapper" id="project-details-wrapper">
      <div class="project-details">
        <h2 class="project-title">Climate positive design <strong>scorecard</strong></h2>
        <div class="project-description">
          <div>
            <span>Project Name</span>
            <span>Being Proactive Carbon Reducers</span>
          </div>
          <div>
            <span>Type of Project</span>
            <span>Park</span>
          </div>
        </div>
        <div class="logo">
          <img src="https://app.climatepositivedesign.com/img/pathfinder-dark-color.png">
        </div>
      </div>
    </div>
    <div class="main" id="main-wrapper">
        <div>
            <div class="section-header">
                Carbon Impact
            </div>
            <div class="statistics" id="column1">
                <div class="data-row">
                    <div class="title">
                        Net Impact over 60 years
                    </div>
                    <div class="title emit">21,532 Metric Tons</div>
                </div>
                <div class="data-row">
                    <span>Total Embodied Emissions</span>
                    <span class="">21,532,496 kgCO₂e</span>
                </div>
                <div class="data-row">
                    <span>Total Biogenic <span style="font-size:x-small">(Sequestration + Emissions)</span></span>
                    <span class="">0 kgCO₂e</span>
                </div>
                <div class="data-row">
                    <span>Total Operational Emissions</span>
                    <span class="">0 kgCO₂e</span>
                </div>
                <div class="data-row">
                    <span>Total Carbon Stored</span>
                    <span class="ok">35,017 kgCO₂e</span>
                </div>
            </div>
            <div class="section-header extra-space">
                Project Area
            </div>
            <div class="profile statistics">
                <div class="data-row">
                    <div class="title">
                        Site Area
                    </div>
                    <div class="title">631,620 ft² (14.00 acres)</div>
                </div>
                <div class="data-row">
                    <span>Planted Area</span>
                    <span>0 ft² (0% of total area)</span>
                </div>
                <div class="data-row">
                    <span>Emissions per Area</span>
                    <span>34 kgCO₂e/ft²</span>
                </div>
                <div class="data-row">
                    <span>Sequestration per Area</span>
                    <span class="ok">0 kgCO₂e/ft²</span>
                </div>
            </div>
        </div>
        <div>
            <div class="section-header">
                Benefits
            </div>
            <div class="statistics benefits" id="column2">
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Biodiversity</span>
                        </div>
                    </div>
                    <div class="info-row ">
                            0%
                        Existing Native Ecosystem Preserved
                    </div>
                    <div class="info-row ">
                            0%
                        Biodiversity Net Impact
                    </div>
                </div>
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Cooling</span>
                        </div>
                    </div>
                    <div class="info-row">
                         Not
                                                Designated Severe Heat Zone
                    </div>
                    <div class="info-row">
                        0% of Project Site Shaded
                    </div>
                </div>
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Water</span>
                        </div>
                    </div>
                    <div class="info-row">
                        <div>0% Water Use Reduction from Baseline</div>
                    </div>
                </div>
                <div>
                    <div class="info-row">
                        <div class="title">
                            <span>Equity</span>
                        </div>
                    </div>
                    <div class="info-row">
                            Not
                        Designated Underserved Community
                    </div>
                </div>
            </div>
            <div class="section-header extra-space">
                IMPROVEMENTS
            </div>
            <div class="statistics benefits">
                <div>
                    <div class="info-row">From Baseline Project: N/A*</div>
                    <div class="info-row">N/A* Total Emissions Reduction</div>
                    <div class="info-row">N/A* Total Sequestration Increase</div>
                </div>
            </div>
        </div>
    </div>
    <div class="charts">
        <div class="emissions-chart" id="emissions-chart">
            <div class="chart-titles">
                <span>Project Emissions</span>
            </div>
            <div id="pie-chart" class="pie-chart" data-highcharts-chart="2" style="overflow: hidden;"><div id="highcharts-tjq954r-20" dir="ltr" style="position: relative; overflow: hidden; width: 503px; height: 240px; text-align: left; line-height: normal; z-index: 0; -webkit-tap-highlight-color: rgba(0, 0, 0, 0); user-select: none; touch-action: manipulation; outline: none; padding: 0px;" class="highcharts-container "><svg version="1.1" class="highcharts-root" style="font-family: -apple-system, BlinkMacSystemFont, &quot;Segoe UI&quot;, Roboto, Helvetica, Arial, &quot;Apple Color Emoji&quot;, &quot;Segoe UI Emoji&quot;, &quot;Segoe UI Symbol&quot;, sans-serif; font-size: 1rem;" xmlns="http://www.w3.org/2000/svg" width="503" height="240" viewBox="0 0 503 240" role="img" aria-label=""><desc>Created with Highcharts 12.3.0</desc><defs><filter id="highcharts-drop-shadow-2"><feDropShadow dx="1" dy="1" flood-color="#000000" flood-opacity="0.75" stdDeviation="2.5"></feDropShadow></filter></defs><rect fill="none" class="highcharts-background" filter="none" x="0" y="0" width="503" height="240" rx="0" ry="0"></rect><rect fill="none" class="highcharts-plot-background" x="50" y="50" width="403" height="140" filter="none"></rect><rect fill="none" class="highcharts-plot-border" data-z-index="1" stroke="#cccccc" stroke-width="0" x="50" y="50" width="403" height="140"></rect><g class="highcharts-series-group" data-z-index="3" filter="none"><g class="highcharts-series highcharts-series-0 highcharts-pie-series highcharts-tracker" data-z-index="0.1" opacity="1" transform="translate(50,50) scale(1 1)" filter="none" clip-path="none" style="cursor: pointer;"><path fill="#d6dade" d="M 201.48840671800363 13.07900329758963 A 3 3 0 0 1 204.64569121660998 10.082518187345833 A 60 60 0 1 1 160.35875075305842 113.67376341009586 A 3 3 0 0 1 160.34341808657283 109.32093291369571 L 201.5 70 A 0 0 0 0 1 201.5 70 A 0 0 0 1 0 201.5 70 A 0 0 0 0 1 201.5 70 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-0"></path><path fill="#c0c4c7" d="M 160.34341808657283 109.32093291369571 A 3 3 0 0 1 155.9958136397265 109.1071479871583 A 60 60 0 0 1 171.7369371570876 17.90239842172341 A 3 3 0 0 1 175.90468385859884 19.15828689332224 L 201.5 70 A 0 0 0 0 1 201.5 70 A 0 0 0 0 0 201.5 70 A 0 0 0 0 1 201.5 70 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-1"></path><path fill="#a7aaae" d="M 175.90468385859884 19.15828689332224 A 3 3 0 0 1 177.37818675575204 15.062416090533944 A 60 60 0 0 1 190.6965510433096 10.980634613373006 A 3 3 0 0 1 194.21203184123192 13.547493234429503 L 201.5 70 A 0 0 0 0 1 201.5 70 A 0 0 0 0 0 201.5 70 A 0 0 0 0 1 201.5 70 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-2"></path><path fill="#8a8d90" d="M 194.21203184123192 13.547493234429503 A 3 3 0 0 1 196.960358096126 10.171982722268062 A 60 60 0 0 1 197.65993310230724 10.123010377764949 A 3 3 0 0 1 200.8517418859836 13.08269365634375 L 201.5 70 A 0 0 0 0 1 201.5 70 A 0 0 0 0 0 201.5 70 A 0 0 0 0 1 201.5 70 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-3"></path><path fill="#64676a" d="M 200.81974400961073 10.273268070326267 A 0.2687895399036036 0.2687895399036036 0 0 1 201.08666444628665 10.001423735891564 A 60 60 0 0 1 201.08666444628665 10.001423735891564 A 0.2687895399036036 0.2687895399036036 0 0 1 201.35730489039094 10.26956476537893 L 201.5 70 A 0 0 0 0 1 201.5 70 A 0 0 0 0 0 201.5 70 A 0 0 0 0 1 201.5 70 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-4"></path><path fill="#202528" d="M 201.35680458032826 10.060141065593243 A 0.05994004996002388 0.05994004996002388 0 0 1 201.41666120371576 10.000057877985967 A 60 60 0 0 1 201.41666120371576 10.000057877985967 A 0.05994004996002388 0.05994004996002388 0 0 1 201.476684504668 10.059974554622734 L 201.5 70 A 0 0 0 0 1 201.5 70 A 0 0 0 0 0 201.5 70 A 0 0 0 0 1 201.5 70 Z" transform="translate(0,0)" stroke="#ffffff" stroke-width="1" opacity="1" stroke-linejoin="round" class="highcharts-point highcharts-color-5"></path></g><g class="highcharts-markers highcharts-series-0 highcharts-pie-series" data-z-index="0.1" opacity="1" transform="translate(50,50) scale(1 1)" clip-path="none"></g></g><text x="252" class="highcharts-title" data-z-index="4" text-align="center" y="25" text-anchor="middle" transform-origin="10 22" transform="translate(0,0) scale(1 1)" style="font-size: 1.2em;"></text><text x="252" class="highcharts-subtitle" data-z-index="4" text-align="center" y="24" text-anchor="middle" transform-origin="10 15" transform="translate(0,0) scale(1 1)" style="font-size: 0.8em; fill: rgb(102, 102, 102);"></text><text x="10" text-anchor="start" class="highcharts-caption" data-z-index="4" style="font-size: 0.8em; fill: rgb(102, 102, 102);" text-align="left" y="237" transform-origin="10 15" transform="translate(0,0) scale(1 1)"></text><g class="highcharts-datalabels-group" data-z-index="6"><g class="highcharts-data-labels highcharts-series-0 highcharts-pie-series highcharts-tracker" data-z-index="6" opacity="1" transform="translate(50,50) scale(1 1)" style="cursor: pointer;"><path fill="none" class="highcharts-data-label-connector highcharts-color-0" stroke-width="1" stroke="#d6dade" d="M 289.25817248478467 105.370678350558 L 284.2581724847846 105.370678350558 L 262.1893264888421 95.93849745707587 L 256.6721149898564 93.58045223370533"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-1" stroke-width="1" stroke="#c0c4c7" d="M 107.80760190849749 54.714107131788424 L 112.80760190849752 54.714107131788424 L 136.4589080662315 58.79034522997818 L 142.37173460566498 59.809404754525616"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-2" stroke-width="1" stroke="#a7aaae" d="M 132.72108498884603 6.5 L 182.0428125387463 6.5 L 182.16412929920708 6.895926405324534 L 183.92193572655188 12.632660368476849"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-3" stroke-width="1" stroke="#8a8d90" d="M 190.21383442040758 -13.28019894334134 L 195.66894675863202 -13.28019894334134 L 196.8901452416323 4.161187441549684 L 197.30922294693846 10.14653403777244" visibility="hidden"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-4" stroke-width="1" stroke="#64676a" d="M 195.8878766310867 -13.49791833693282 L 200.93208656362032 -13.49791833693282 L 201.05110952946274 4.001526552915932 L 201.09191775405702 10.00138777537812" visibility="hidden"></path><path fill="none" class="highcharts-data-label-connector highcharts-color-5" stroke-width="1" stroke="#202528" d="M 196.41017080556762 -13.499955170632315 L 201.41665847283676 -13.499955170632315 L 201.4341252574125 4.000032874869635 L 201.440113870375 10.000029886245123" visibility="hidden"></path><g class="highcharts-label highcharts-data-label highcharts-data-label-color-0" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(294,80)"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Aggregate &amp; Asphalt<tspan dy="14" x="5">​</tspan>Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">​</tspan>62.9 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-1" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(-8,36)"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Concrete Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">​</tspan>29.7 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-2" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(10,-12)"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Playground &amp; Athletic</tspan><tspan class="highcharts-br" dy="14" x="5">​</tspan>5.4 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-3" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(52,-32)" visibility="hidden"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Brick &amp; Stone Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">​</tspan>1.9 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-4" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(43,-32)" visibility="hidden"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Infrastructure &amp; Subsurface</tspan><tspan class="highcharts-br" dy="14" x="5">​</tspan>0.2 %</text></g><g class="highcharts-label highcharts-data-label highcharts-data-label-color-5" data-z-index="1" filter="none" style="cursor: pointer;" transform="translate(57,-32)" visibility="hidden"><text x="5" data-z-index="1" y="16" style="font-size: 11px; font-weight: bold; fill: rgb(51, 51, 51);"><tspan style="font-weight: bold;">Metal &amp; Wood Hardscape</tspan><tspan class="highcharts-br" dy="14" x="5">​</tspan>0.0 %</text></g></g></g><g class="highcharts-legend highcharts-no-tooltip" data-z-index="7" visibility="hidden"><rect fill="none" class="highcharts-legend-box" rx="0" ry="0" stroke="#999999" stroke-width="0" filter="none" x="0" y="0" width="8" height="8"></rect><g data-z-index="1"><g></g></g></g></svg></div></div>
        </div>
        <div class="impact-chart">
            <div class="chart-titles">
                <span>Project Impact</span>
                <span class="years-to-positive"><span class="material-icons inf-fixed"></span><span class="astr-fixed">**</span></span>
                <span class="years-to-positive-text">years to positive</span>
            </div>
            <div>
                <svg class="bar-chart" viewport="0 0 671 315" width="653.9" height="240">
                    <defs>
                        <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="0" refY="3.5" orient="auto">
                            <polygon points="0 0, 10 3.5, 0 7"></polygon>
                        </marker>
                    </defs>
                    <g class="inner-box" transform="translate(65.39, 30)"><g class="x axis" transform="translate(0, 171.6)" fill="none" font-size="10" font-family="sans-serif" text-anchor="middle"><path class="domain" stroke="currentColor" d="M0.5,6V0.5H526.3149999999999V6"></path><g class="tick" opacity="1" transform="translate(36.90445382830626,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2035</text></g><g class="tick" opacity="1" transform="translate(81.45843016241298,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2040</text></g><g class="tick" opacity="1" transform="translate(126.03680626450115,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2045</text></g><g class="tick" opacity="1" transform="translate(170.59078259860786,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2050</text></g><g class="tick" opacity="1" transform="translate(215.1447589327146,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2055</text></g><g class="tick" opacity="1" transform="translate(259.6987352668213,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2060</text></g><g class="tick" opacity="1" transform="translate(304.2771113689095,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2065</text></g><g class="tick" opacity="1" transform="translate(348.8310877030162,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2070</text></g><g class="tick" opacity="1" transform="translate(393.3850640371229,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2075</text></g><g class="tick" opacity="1" transform="translate(437.9390403712297,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2080</text></g><g class="tick" opacity="1" transform="translate(482.51741647331784,0)"><line stroke="currentColor" y2="6"></line><text fill="currentColor" y="9" dy="0.71em">2085</text></g></g><g class="y axis" fill="none" font-size="10" font-family="sans-serif" text-anchor="end"><path class="domain" stroke="currentColor" d="M-6,172.1H0.5V0.5H-6"></path><g class="tick" opacity="1" transform="translate(0,172.1)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">0.00</text></g><g class="tick" opacity="1" transform="translate(0,156.5)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">2.00</text></g><g class="tick" opacity="1" transform="translate(0,140.89999999999998)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">4.00</text></g><g class="tick" opacity="1" transform="translate(0,125.3)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">6.00</text></g><g class="tick" opacity="1" transform="translate(0,109.69999999999999)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">8.00</text></g><g class="tick" opacity="1" transform="translate(0,94.1)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">10.0</text></g><g class="tick" opacity="1" transform="translate(0,78.5)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">12.0</text></g><g class="tick" opacity="1" transform="translate(0,62.9)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">14.0</text></g><g class="tick" opacity="1" transform="translate(0,47.3)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">16.0</text></g><g class="tick" opacity="1" transform="translate(0,31.69999999999999)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">18.0</text></g><g class="tick" opacity="1" transform="translate(0,16.100000000000005)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">20.0</text></g><g class="tick" opacity="1" transform="translate(0,0.5)"><line stroke="currentColor" x2="-6"></line><text fill="currentColor" x="-9" dy="0.32em">22.0</text></g></g><text class="x-axis-label" transform="translate(0, 206.6)" text-anchor="middle">Construction Completion</text><text class="x-axis-label" transform="translate(505.81499999999994, 206.6)" text-anchor="middle">60 Year Lifespan</text><text transform="translate(-45.772999999999996, 85.8) rotate(-90)" text-anchor="middle">Metric Tons (tCO₂e)</text><path d="M0,3.6465335893691395L8.905915313225057,3.6465335893691395L17.836230394431553,3.6465335893691395L26.742145707656608,3.6465335893691395L35.64806102088167,3.6465335893691395L44.55397633410673,3.6465335893691395L53.484291415313216,3.6465335893691395L62.390206728538274,3.6465335893691395L71.29612204176334,3.6465335893691395L80.20203735498839,3.6465335893691395L89.13235243619488,3.6465335893691395L98.03826774941994,3.6465335893691395L106.944183062645,3.6465335893691395L115.85009837587006,3.6465335893691395L124.78041345707655,3.6465335893691395L133.6863287703016,3.6465335893691395L142.59224408352668,3.6465335893691395L151.49815939675173,3.6465335893691395L160.42847447795822,3.6465335893691395L169.33438979118327,3.6465335893691395L178.24030510440835,3.6465335893691395L187.14622041763337,3.6465335893691395L196.0765354988399,3.6465335893691395L204.98245081206497,3.6465335893691395L213.88836612529,3.6465335893691395L222.79428143851504,3.6465335893691395L231.72459651972156,3.6465335893691395L240.6305118329466,3.6465335893691395L249.53642714617166,3.6465335893691395L258.44234245939674,3.6465335893691395L267.3726575406032,3.6465335893691395L276.2785728538283,3.6465335893691395L285.18448816705336,3.6465335893691395L294.0904034802784,3.6465335893691395L303.0207185614849,3.6465335893691395L311.92663387471,3.6465335893691395L320.832549187935,3.6465335893691395L329.7384645011601,3.6465335893691395L338.66877958236654,3.6465335893691395L347.5746948955916,3.6465335893691395L356.4806102088167,3.6465335893691395L365.3865255220417,3.6465335893691395L374.31684060324824,3.6465335893691395L383.2227559164733,3.6465335893691395L392.1286712296983,3.6465335893691395L401.03458654292336,3.6465335893691395L409.96490162412994,3.6465335893691395L418.8708169373549,3.6465335893691395L427.77673225058,3.6465335893691395L436.68264756380506,3.6465335893691395L445.6129626450115,3.6465335893691395L454.5188779582366,3.6465335893691395L463.4247932714617,3.6465335893691395L472.3307085846867,3.6465335893691395L481.2610236658932,3.6465335893691395L490.16693897911824,3.6465335893691395L499.0728542923433,3.6465335893691395L507.9787696055684,3.6465335893691395L516.9090846867749,3.6465335893691395L525.8149999999999,3.6465335893691395" stroke="#8a97a2" stroke-width="2" stroke-dasharray="8" fill="none"></path><circle cx="0" cy="3.6465335893691395" r="5" fill="#8a97a2"></circle><path d="M0,171.6L8.905915313225057,171.6L17.836230394431553,171.6L26.742145707656608,171.6L35.64806102088167,171.6L44.55397633410673,171.6L53.484291415313216,171.6L62.390206728538274,171.6L71.29612204176334,171.6L80.20203735498839,171.6L89.13235243619488,171.6L98.03826774941994,171.6L106.944183062645,171.6L115.85009837587006,171.6L124.78041345707655,171.6L133.6863287703016,171.6L142.59224408352668,171.6L151.49815939675173,171.6L160.42847447795822,171.6L169.33438979118327,171.6L178.24030510440835,171.6L187.14622041763337,171.6L196.0765354988399,171.6L204.98245081206497,171.6L213.88836612529,171.6L222.79428143851504,171.6L231.72459651972156,171.6L240.6305118329466,171.6L249.53642714617166,171.6L258.44234245939674,171.6L267.3726575406032,171.6L276.2785728538283,171.6L285.18448816705336,171.6L294.0904034802784,171.6L303.0207185614849,171.6L311.92663387471,171.6L320.832549187935,171.6L329.7384645011601,171.6L338.66877958236654,171.6L347.5746948955916,171.6L356.4806102088167,171.6L365.3865255220417,171.6L374.31684060324824,171.6L383.2227559164733,171.6L392.1286712296983,171.6L401.03458654292336,171.6L409.96490162412994,171.6L418.8708169373549,171.6L427.77673225058,171.6L436.68264756380506,171.6L445.6129626450115,171.6L454.5188779582366,171.6L463.4247932714617,171.6L472.3307085846867,171.6L481.2610236658932,171.6L490.16693897911824,171.6L499.0728542923433,171.6L507.9787696055684,171.6L516.9090846867749,171.6L525.8149999999999,171.6" stroke="#00a25f" stroke-width="2" fill="none"></path><circle cx="0" cy="171.6" r="5" fill="#00a25f"></circle><path class="area" d="M0,3.6465335893691395L8.905915313225057,3.6465335893691395L17.836230394431553,3.6465335893691395L26.742145707656608,3.6465335893691395L35.64806102088167,3.6465335893691395L44.55397633410673,3.6465335893691395L53.484291415313216,3.6465335893691395L62.390206728538274,3.6465335893691395L71.29612204176334,3.6465335893691395L80.20203735498839,3.6465335893691395L89.13235243619488,3.6465335893691395L98.03826774941994,3.6465335893691395L106.944183062645,3.6465335893691395L115.85009837587006,3.6465335893691395L124.78041345707655,3.6465335893691395L133.6863287703016,3.6465335893691395L142.59224408352668,3.6465335893691395L151.49815939675173,3.6465335893691395L160.42847447795822,3.6465335893691395L169.33438979118327,3.6465335893691395L178.24030510440835,3.6465335893691395L187.14622041763337,3.6465335893691395L196.0765354988399,3.6465335893691395L204.98245081206497,3.6465335893691395L213.88836612529,3.6465335893691395L222.79428143851504,3.6465335893691395L231.72459651972156,3.6465335893691395L240.6305118329466,3.6465335893691395L249.53642714617166,3.6465335893691395L258.44234245939674,3.6465335893691395L267.3726575406032,3.6465335893691395L276.2785728538283,3.6465335893691395L285.18448816705336,3.6465335893691395L294.0904034802784,3.6465335893691395L303.0207185614849,3.6465335893691395L311.92663387471,3.6465335893691395L320.832549187935,3.6465335893691395L329.7384645011601,3.6465335893691395L338.66877958236654,3.6465335893691395L347.5746948955916,3.6465335893691395L356.4806102088167,3.6465335893691395L365.3865255220417,3.6465335893691395L374.31684060324824,3.6465335893691395L383.2227559164733,3.6465335893691395L392.1286712296983,3.6465335893691395L401.03458654292336,3.6465335893691395L409.96490162412994,3.6465335893691395L418.8708169373549,3.6465335893691395L427.77673225058,3.6465335893691395L436.68264756380506,3.6465335893691395L445.6129626450115,3.6465335893691395L454.5188779582366,3.6465335893691395L463.4247932714617,3.6465335893691395L472.3307085846867,3.6465335893691395L481.2610236658932,3.6465335893691395L490.16693897911824,3.6465335893691395L499.0728542923433,3.6465335893691395L507.9787696055684,3.6465335893691395L516.9090846867749,3.6465335893691395L525.8149999999999,3.6465335893691395L525.8149999999999,171.6L516.9090846867749,171.6L507.9787696055684,171.6L499.0728542923433,171.6L490.16693897911824,171.6L481.2610236658932,171.6L472.3307085846867,171.6L463.4247932714617,171.6L454.5188779582366,171.6L445.6129626450115,171.6L436.68264756380506,171.6L427.77673225058,171.6L418.8708169373549,171.6L409.96490162412994,171.6L401.03458654292336,171.6L392.1286712296983,171.6L383.2227559164733,171.6L374.31684060324824,171.6L365.3865255220417,171.6L356.4806102088167,171.6L347.5746948955916,171.6L338.66877958236654,171.6L329.7384645011601,171.6L320.832549187935,171.6L311.92663387471,171.6L303.0207185614849,171.6L294.0904034802784,171.6L285.18448816705336,171.6L276.2785728538283,171.6L267.3726575406032,171.6L258.44234245939674,171.6L249.53642714617166,171.6L240.6305118329466,171.6L231.72459651972156,171.6L222.79428143851504,171.6L213.88836612529,171.6L204.98245081206497,171.6L196.0765354988399,171.6L187.14622041763337,171.6L178.24030510440835,171.6L169.33438979118327,171.6L160.42847447795822,171.6L151.49815939675173,171.6L142.59224408352668,171.6L133.6863287703016,171.6L124.78041345707655,171.6L115.85009837587006,171.6L106.944183062645,171.6L98.03826774941994,171.6L89.13235243619488,171.6L80.20203735498839,171.6L71.29612204176334,171.6L62.390206728538274,171.6L53.484291415313216,171.6L44.55397633410673,171.6L35.64806102088167,171.6L26.742145707656608,171.6L17.836230394431553,171.6L8.905915313225057,171.6L0,171.6Z" fill="#8a97a2" style="opacity: 0.2;"></path><path class="area" d="M0,3.6465335893691395L8.905915313225057,3.6465335893691395L17.836230394431553,3.6465335893691395L26.742145707656608,3.6465335893691395L35.64806102088167,3.6465335893691395L44.55397633410673,3.6465335893691395L53.484291415313216,3.6465335893691395L62.390206728538274,3.6465335893691395L71.29612204176334,3.6465335893691395L80.20203735498839,3.6465335893691395L89.13235243619488,3.6465335893691395L98.03826774941994,3.6465335893691395L106.944183062645,3.6465335893691395L115.85009837587006,3.6465335893691395L124.78041345707655,3.6465335893691395L133.6863287703016,3.6465335893691395L142.59224408352668,3.6465335893691395L151.49815939675173,3.6465335893691395L160.42847447795822,3.6465335893691395L169.33438979118327,3.6465335893691395L178.24030510440835,3.6465335893691395L187.14622041763337,3.6465335893691395L196.0765354988399,3.6465335893691395L204.98245081206497,3.6465335893691395L213.88836612529,3.6465335893691395L222.79428143851504,3.6465335893691395L231.72459651972156,3.6465335893691395L240.6305118329466,3.6465335893691395L249.53642714617166,3.6465335893691395L258.44234245939674,3.6465335893691395L267.3726575406032,3.6465335893691395L276.2785728538283,3.6465335893691395L285.18448816705336,3.6465335893691395L294.0904034802784,3.6465335893691395L303.0207185614849,3.6465335893691395L311.92663387471,3.6465335893691395L320.832549187935,3.6465335893691395L329.7384645011601,3.6465335893691395L338.66877958236654,3.6465335893691395L347.5746948955916,3.6465335893691395L356.4806102088167,3.6465335893691395L365.3865255220417,3.6465335893691395L374.31684060324824,3.6465335893691395L383.2227559164733,3.6465335893691395L392.1286712296983,3.6465335893691395L401.03458654292336,3.6465335893691395L409.96490162412994,3.6465335893691395L418.8708169373549,3.6465335893691395L427.77673225058,3.6465335893691395L436.68264756380506,3.6465335893691395L445.6129626450115,3.6465335893691395L454.5188779582366,3.6465335893691395L463.4247932714617,3.6465335893691395L472.3307085846867,3.6465335893691395L481.2610236658932,3.6465335893691395L490.16693897911824,3.6465335893691395L499.0728542923433,3.6465335893691395L507.9787696055684,3.6465335893691395L516.9090846867749,3.6465335893691395L525.8149999999999,3.6465335893691395L525.8149999999999,3.6465335893691395L516.9090846867749,3.6465335893691395L507.9787696055684,3.6465335893691395L499.0728542923433,3.6465335893691395L490.16693897911824,3.6465335893691395L481.2610236658932,3.6465335893691395L472.3307085846867,3.6465335893691395L463.4247932714617,3.6465335893691395L454.5188779582366,3.6465335893691395L445.6129626450115,3.6465335893691395L436.68264756380506,3.6465335893691395L427.77673225058,3.6465335893691395L418.8708169373549,3.6465335893691395L409.96490162412994,3.6465335893691395L401.03458654292336,3.6465335893691395L392.1286712296983,3.6465335893691395L383.2227559164733,3.6465335893691395L374.31684060324824,3.6465335893691395L365.3865255220417,3.6465335893691395L356.4806102088167,3.6465335893691395L347.5746948955916,3.6465335893691395L338.66877958236654,3.6465335893691395L329.7384645011601,3.6465335893691395L320.832549187935,3.6465335893691395L311.92663387471,3.6465335893691395L303.0207185614849,3.6465335893691395L294.0904034802784,3.6465335893691395L285.18448816705336,3.6465335893691395L276.2785728538283,3.6465335893691395L267.3726575406032,3.6465335893691395L258.44234245939674,3.6465335893691395L249.53642714617166,3.6465335893691395L240.6305118329466,3.6465335893691395L231.72459651972156,3.6465335893691395L222.79428143851504,3.6465335893691395L213.88836612529,3.6465335893691395L204.98245081206497,3.6465335893691395L196.0765354988399,3.6465335893691395L187.14622041763337,3.6465335893691395L178.24030510440835,3.6465335893691395L169.33438979118327,3.6465335893691395L160.42847447795822,3.6465335893691395L151.49815939675173,3.6465335893691395L142.59224408352668,3.6465335893691395L133.6863287703016,3.6465335893691395L124.78041345707655,3.6465335893691395L115.85009837587006,3.6465335893691395L106.944183062645,3.6465335893691395L98.03826774941994,3.6465335893691395L89.13235243619488,3.6465335893691395L80.20203735498839,3.6465335893691395L71.29612204176334,3.6465335893691395L62.390206728538274,3.6465335893691395L53.484291415313216,3.6465335893691395L44.55397633410673,3.6465335893691395L35.64806102088167,3.6465335893691395L26.742145707656608,3.6465335893691395L17.836230394431553,3.6465335893691395L8.905915313225057,3.6465335893691395L0,3.6465335893691395Z" fill="#00a25f" style="opacity: 0.2;"></path><line class="tracker" x1="-8.125122737819025" x2="-8.125122737819025" y1="0" y2="171.6" stroke-dasharray="4" stroke="#82b977" style="opacity: 1;"></line><path d="M0,-8 V8 M-8,0 H8" stroke-width="5" stroke="#00a25f" transform="translate(-8.125122737819025, 171.6)"></path><g class="zero-text" transform="translate(3, 43.64653358936914)" text-anchor="start" font-weight="bold"><rect width="51" height="16" y="-13"></rect><line x1="55" x2="100" y1="-9" y2="-9" stroke="#000" marker-end="url(#arrowhead)"></line><path d="M0,-4 V4 M-4,0 H4" stroke-width="2" stroke="#00a25f" transform="translate(51, 10)"></path><text x="4" y="-1" font-size="10.7"><tspan x="3" fill="#fff">CLIMATE</tspan><tspan x="0" dy="15">POSITIVE</tspan></text></g><text transform="translate(387.2227559164733, 171.6)" class="chart-descriptor-value" font-weight="bold" fill="#8a97a2" text-anchor="middle"><tspan x="0">21532.5</tspan><tspan dx="2"><tspan>tCO₂e</tspan></tspan><tspan dy="1em" x="0">NET IMPACT</tspan></text><text transform="translate(4, -14.35346641063086)" class="chart-descriptor-value" font-weight="bold" fill="#8a97a2"><tspan>21532.5</tspan><tspan dx="2"><tspan>tCO₂e</tspan></tspan></text><text dx="5" dy="-4.35346641063086" transform="rotate(0)" font-weight="bold" fill="#8a97a2" font-size="10">PROJECT EMISSIONS</text><line x1="525.8149999999999" x2="525.8149999999999" y1="0" y2="171.6" stroke="#999" stroke-width="1.5" stroke-dasharray="8"></line></g>
                </svg>
            </div>
        </div>
    </div>
</div>

<script type="module">
  /* eslint no-undef: 0 */
  /* eslint import/extensions: 0 */
  /* eslint import/no-unresolved: 0 */

  import { schemeYlOrBr } from 'https://cdn.skypack.dev/d3-scale-chromatic@3';

  function loadCharts({ hcChartWidth, d3ChartWidth, chartHeight, print }) {
    return new Promise((resolve, reject) => {
      hcChartWidth *= 1;
      d3ChartWidth *= 1;
      chartHeight *= 1;
      // load bar chart
      const svg = d3.select('.bar-chart').attr('width', d3ChartWidth).attr('height', chartHeight);

      const margin = {
        left: Math.max(d3ChartWidth * 0.1, 60), top: 30, right: d3ChartWidth * 0.05 + 30, bottom: chartHeight * 0.16,
      };
      const w = d3ChartWidth - (margin.left + margin.right);
      const h = chartHeight - (margin.top + margin.bottom);

      const g = svg
        .select('.inner-box')
        .attr('transform', `translate(${margin.left}, ${margin.top})`);
      g.selectAll('*').remove();

      const completionDate = new Date('Sun Dec 01 2030 05:00:00 GMT+0000 (Coordinated Universal Time)');
      const addYearsToDate = (date, yearsToAdd) => {
        const year = completionDate.getFullYear();
        const month = completionDate.getMonth();
        const day = completionDate.getDate();
        return new Date(year + yearsToAdd, month, day);
      };
      const lifespanDate = addYearsToDate(completionDate, 60 - 1);

      let ytp = '∞**' || 60 - 1;
      if (ytp === 'N/A') {
        ytp = 1;
      } else if (ytp === '∞') {
        ytp = 60 - 1;
      }
      ytp = Math.min(ytp, 60 - 1);

      const yearByYear = JSON.parse('[{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":1,"_id":"686d520361965b1e9098a58a"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":2,"_id":"686d520361965b1e9098a58b"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":3,"_id":"686d520361965b1e9098a58c"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":4,"_id":"686d520361965b1e9098a58d"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":5,"_id":"686d520361965b1e9098a58e"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":6,"_id":"686d520361965b1e9098a58f"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":7,"_id":"686d520361965b1e9098a590"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":8,"_id":"686d520361965b1e9098a591"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":9,"_id":"686d520361965b1e9098a592"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":10,"_id":"686d520361965b1e9098a593"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":11,"_id":"686d520361965b1e9098a594"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":12,"_id":"686d520361965b1e9098a595"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":13,"_id":"686d520361965b1e9098a596"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":14,"_id":"686d520361965b1e9098a597"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":15,"_id":"686d520361965b1e9098a598"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":16,"_id":"686d520361965b1e9098a599"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":17,"_id":"686d520361965b1e9098a59a"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":18,"_id":"686d520361965b1e9098a59b"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":19,"_id":"686d520361965b1e9098a59c"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":20,"_id":"686d520361965b1e9098a59d"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":21,"_id":"686d520361965b1e9098a59e"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":22,"_id":"686d520361965b1e9098a59f"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":23,"_id":"686d520361965b1e9098a5a0"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":24,"_id":"686d520361965b1e9098a5a1"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":25,"_id":"686d520361965b1e9098a5a2"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":26,"_id":"686d520361965b1e9098a5a3"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":27,"_id":"686d520361965b1e9098a5a4"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":28,"_id":"686d520361965b1e9098a5a5"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":29,"_id":"686d520361965b1e9098a5a6"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":30,"_id":"686d520361965b1e9098a5a7"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":31,"_id":"686d520361965b1e9098a5a8"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":32,"_id":"686d520361965b1e9098a5a9"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":33,"_id":"686d520361965b1e9098a5aa"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":34,"_id":"686d520361965b1e9098a5ab"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":35,"_id":"686d520361965b1e9098a5ac"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":36,"_id":"686d520361965b1e9098a5ad"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":37,"_id":"686d520361965b1e9098a5ae"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":38,"_id":"686d520361965b1e9098a5af"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":39,"_id":"686d520361965b1e9098a5b0"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":40,"_id":"686d520361965b1e9098a5b1"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":41,"_id":"686d520361965b1e9098a5b2"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":42,"_id":"686d520361965b1e9098a5b3"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":43,"_id":"686d520361965b1e9098a5b4"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":44,"_id":"686d520361965b1e9098a5b5"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":45,"_id":"686d520361965b1e9098a5b6"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":46,"_id":"686d520361965b1e9098a5b7"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":47,"_id":"686d520361965b1e9098a5b8"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":48,"_id":"686d520361965b1e9098a5b9"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":49,"_id":"686d520361965b1e9098a5ba"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":50,"_id":"686d520361965b1e9098a5bb"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":51,"_id":"686d520361965b1e9098a5bc"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":52,"_id":"686d520361965b1e9098a5bd"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":53,"_id":"686d520361965b1e9098a5be"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":54,"_id":"686d520361965b1e9098a5bf"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":55,"_id":"686d520361965b1e9098a5c0"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":56,"_id":"686d520361965b1e9098a5c1"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":57,"_id":"686d520361965b1e9098a5c2"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":58,"_id":"686d520361965b1e9098a5c3"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":59,"_id":"686d520361965b1e9098a5c4"},{"totals":{"materials":21532.495693670622,"materialCarbonStoredInTonnes":-35.01738802845,"plantCarbonStoredInTonnes":0,"plantOperationalCarbonInTonnes":0,"plants":0,"operations":0,"emissions":21532.495693670622,"shadedArea":0,"waterUseCO2Impact":0,"waterUse":0,"overall":21532.495693670622},"year":60,"_id":"686d520361965b1e9098a5c5"}]');
      const data = yearByYear.map((x) => ({
        ...x,
        year: addYearsToDate(completionDate, x.year - 1),
      }));



      const yearPositive = '2030';
      let yearPositiveDate;
      if (yearPositive) {
        yearPositiveDate = new Date(+yearPositive, 0, 2);
      } else if (ytp === 0) {
        yearPositiveDate = data[0]?.year;
      } else {
        yearPositiveDate = lifespanDate;
      }

      const xValue = (d) => d.year;

      // the values in plants and materials are kg co2, the values should be in 1000 kg co2
      // https://climatepositivedesign.atlassian.net/browse/PAT-304
      const sequestrationValue = (d) => {
        return ((d?.totals?.plants || 0) / 1000) * -1;
      }
      const emissionsValue = (d) => ((d?.totals?.emissions || 0)) / 1000;

      const extent = d3.extent(data.map((d) => [sequestrationValue(d), emissionsValue(d)]).flat());

      const xScale = d3.scaleTime().domain([completionDate, lifespanDate]).range([0, w]);
      const yScale = d3.scaleLinear().domain(extent).range([h, 0]).nice();

      // X AXIS
      const xAxis = d3.axisBottom(xScale).ticks(10);
      g.append('g').attr('class', 'x axis').attr('transform', `translate(0, ${h})`).call(xAxis);

      // const xAxisLabel = g.append('text')
      //   .attr('transform', `translate(${w / 2}, ${chartHeight - margin.bottom + chartHeight * 0.03 + 10})`)
      //   .attr('text-anchor', 'middle')
      //   .text('Year')
      // .attr('font-size', 14)

      // Y AXIS
      const yAxis = d3.axisLeft(yScale).ticks(8).tickFormat((x) => {
        return d3.format(".3s")(x);
      });
      g.append('g').attr('class', 'y axis').call(yAxis);

      g.append('text')
        .attr('class', 'x-axis-label')
        .attr('transform', `translate(0, ${h + 35})`)
        .text('Construction Completion')
        .attr('text-anchor', 'middle');

      g.append('text')
        .attr('class', 'x-axis-label')
        .attr('transform', `translate(${w - 20}, ${h + 35})`)
        .text('60 Year Lifespan')
        .attr('text-anchor', 'middle');

      g.append('text')
        .attr('transform', `translate(${-margin.left * 0.7}, ${h / 2}) rotate(-90)`)
        .attr('text-anchor', 'middle')
        .text('Metric Tons (tCO₂e)');

      // EMISSIONS LINE AND CIRCLE
      //const embodiedColor = '#f92d34';
      const embodiedColor = '#8a97a2';
      g.append('path')
        .datum(data)
        .attr('d', d3.line().x((d) => xScale(xValue(d))).y((d) => yScale(emissionsValue(d))))
        .attr('stroke', embodiedColor)
        .attr('stroke-width', 2)
        .attr('stroke-dasharray', 8)
        .attr('fill', 'none');
      g.append('circle')
        .attr('cx', 0)
        .attr('cy', yScale(emissionsValue(data[0])))
        .attr('r', 5)
        .attr('fill', embodiedColor);

      // SEQUESTRATION LINE AND CIRCLE
      const gwpColor = '#00a25f';
      g.append('path')
        .datum(data)
        .attr('d', d3.line()
          .x((d) => xScale(xValue(d)))
          .y((d) => {
            return yScale(sequestrationValue(d))
          })
        )
        .attr('stroke', gwpColor)
        .attr('stroke-width', 2)
        .attr('fill', 'none');
      g.append('circle')
        .attr('cx', 0)
        .attr('cy', yScale(sequestrationValue(data[0])))
        .attr('r', 5)
        .attr('fill', gwpColor);

      // EMBODIED AREA
      const embodiedArea = d3.area()
        .x((d) => xScale(xValue(d)))
        .y0((d) => yScale(sequestrationValue(d)))
        .y1((d) => Math.min(yScale(emissionsValue(d)), yScale(sequestrationValue(d))))
      g.append('path')
        .data([data])
        .attr('class', 'area')
        .attr('d', embodiedArea)
        .attr('fill', embodiedColor)
        .style('opacity', 0.2);

      // SEQUESTERED AREA
      const sequesteredArea = d3.area()
        .x((d) => xScale(xValue(d)))
        .y0((d) => {
          return Math.min(yScale(sequestrationValue(d)), yScale(emissionsValue(d)))
        })
        .y1((d) => yScale(emissionsValue(d)))
      g.append('path')
        .data([data])
        .attr('class', 'area')
        .attr('d', sequesteredArea)
        .attr('fill', gwpColor)
        .style('opacity', 0.2);

      // ZERO LINE
      if (yearPositiveDate < lifespanDate) {
        const trackerColor = '#82b977';
        // vertical zero line
        g.append('line')
          .attr('class', 'tracker')
          .style('opacity', 0)
          .attr('x1', xScale(yearPositiveDate))
          .attr('x2', xScale(yearPositiveDate))
          .attr('y1', 0)
          .attr('y2', h)
          .attr('stroke-dasharray', 4)
          .attr('stroke', trackerColor);
        // plus symbol
        g.append('path')
          .attr('d', 'M0,-8 V8 M-8,0 H8') // draw a plus
          .attr('stroke-width', 5)
          .attr('stroke', gwpColor)
          .attr('transform', `translate(${xScale(yearPositiveDate)}, ${yScale(emissionsValue(data[ytp]))})`);

        // depending on space below the embodied line, shift the zero text below or above.
        let zeroTextYPosition;
        // if (ytp < 4) {
        //   zeroTextYPosition = yScale(emissionsValue(data[0])) - 45
        // } else if (yScale(0) - yScale(emissionsValue(data[0])) > 35) {
        //   zeroTextYPosition = yScale(emissionsValue(data[0])) + 19
        // } else {
        //   zeroTextYPosition = yScale(emissionsValue(data[0])) - 35
        // }
        if (ytp < 40) {
          zeroTextYPosition = yScale(emissionsValue(data[0])) + 19;
        } else {
          zeroTextYPosition = yScale(emissionsValue(data[0])) + 40;
        }
        if (zeroTextYPosition > (h - 40)) {
          zeroTextYPosition = yScale(emissionsValue(data[0])) - 55;
        }
        const zeroTextXPosition = Math.max(3, xScale(yearPositiveDate) - 25);
        // zero text
        g.append('g')
          .attr('class', 'zero-text')
          .attr('transform', `translate(${zeroTextXPosition}, ${zeroTextYPosition})`)
          .attr('text-anchor', 'start')
          .attr('font-weight', 'bold')
          // .attr('font-size', 15)
          // .call(g => g.append('tspan').text('Carbon neutral in '))
          // .call(g => g.append('tspan').attr('font-weight', 'bold').text(yearPositiveDate.getFullYear()))
          .call((_g) => _g.append('rect')
            .attr('width', 51)
            .attr('height', 16)
            .attr('y', -13))
          .call((_g) => _g.append('line')
            .attr('x1', 55)
            .attr('x2', 100)
            .attr('y1', -9)
            .attr('y2', -9)
            .attr('stroke', '#000')
            .attr('marker-end', 'url(#arrowhead)'))
          .call((_g) => _g.append('path')
            .attr('d', 'M0,-4 V4 M-4,0 H4') // draw a plus
            .attr('stroke-width', 2)
            .attr('stroke', gwpColor)
            .attr('transform', 'translate(51, 10)'))
          .call((_g) => _g.append('text')
            .attr('x', 4)
            .attr('y', -1)
            .attr('font-size', 10.7)
            .call((text) => text.append('tspan').text('CLIMATE').attr('x', 3).attr('fill', '#fff'))
            .call((text) => text.append('tspan').text('POSITIVE').attr('x', 0).attr('dy', 15)));
      }

      // SEQUESTRATION TEXT

      const getLineAngle = (xDifference, yDifference) => {
        // work out predicted line angle
        // tan(θ) = opposite / adjacent = yDistance / xDistance
        const xDistance = xDifference;
        const yDistance = Math.abs(yDifference);
        const tanTheta = yDistance / xDistance;

        const theta = Math.atan(tanTheta) * (180 / Math.PI);
        return theta * Math.sign(yDifference);
      };
      // let textYear = Math.round(+ytp + ((50 - +ytp) / 2))
      // textYear = Math.min(textYear, 35)
      const textYear = Math.min(Math.max(ytp, 43), 45);
      const textFullYear = completionDate.getFullYear() + (textYear || 43);
      const textDatapoint = data.find((d) => d.year.getFullYear() === textFullYear);

      const totalImpact = +'21532.496';
      const impactColor = totalImpact <= 0 ? gwpColor : embodiedColor;
      const textHorizontalPoint = xScale(xValue(textDatapoint));
      // get midpoint between y value of both lines to place the net impact text
      const getTextVerticalPoint = () => {
        const emi = yScale(emissionsValue(data[textYear]));
        const seq = yScale(sequestrationValue(data[textYear]));
        const diff = Math.abs(emi - seq);
        const heightOfLabel = 30;
        if (ytp < 40 || !ytp || ytp >= 60  - 1) {
          return Math.min(emi, seq) + (diff / 2) - (heightOfLabel / 2);
        }
        return Math.max(emi, seq) + (heightOfLabel / 2);
      };
      const textVerticalPoint = getTextVerticalPoint();
      if (textDatapoint) {
        g.append('text')
          .attr('transform', `translate(${textHorizontalPoint + 4}, ${textVerticalPoint + 15})`)
          .attr('class', 'chart-descriptor-value')
          .attr('font-weight', 'bold')
          .attr('fill', impactColor)
          .attr('text-anchor', 'middle')
          .call((text) => text.append('tspan')
            .attr('x', 0)
            .text(() => Math.round(totalImpact * 10) / 10))
          .call((text) => text.append('tspan')
            .attr('dx', 2)
            .call((tspan) => tspan.append('tspan')
              .text('tCO₂e')))
          .call((text) =>
            text.append('tspan').attr("dy", "1em").attr('x', 0).text(() => 'NET IMPACT')
          );

      }
      if (ytp) {
        const sequestrationLineAngle = getLineAngle(
          Math.abs(xScale(lifespanDate) - xScale(xValue(data[ytp - 1]))),
          yScale(sequestrationValue(data[data.length - 1])) - yScale(sequestrationValue(data[ytp - 1])),
        );

        g.append('text')
          // .attr('transform', `translate(${xScale(xValue(textDatapoint))}, ${yScale(emissionsValue(data[0]))+ 32}) rotate(0)`)
          .attr('dy', yScale(emissionsValue(data[0])) - 8)
          .attr('dx', xScale(xValue(textDatapoint)))
          .attr('class', 'chart-descriptor')
          .attr('font-weight', 'bold')
          .attr('text-anchor', 'middle')
          .attr('fill', gwpColor)
          .text('PROJECT SEQUESTRATION');
      }

      // EMBODIED TEXT
      g.append('text')
        .attr('transform', `translate(4, ${yScale(emissionsValue(data[0])) - 18})`)
        .attr('class', 'chart-descriptor-value')
        .attr('font-weight', 'bold')
        .attr('fill', embodiedColor)
        .call((text) => text.append('tspan')
          .text(Math.round(JSON.parse('21532.495693670622') * 10) / 10))
        .call((text) => text.append('tspan')
          .attr('dx', 2)
          .call((tspan) => tspan.append('tspan')
            .text('tCO₂e')));
      const emissionsLineAngle = getLineAngle(
        Math.abs(xScale(lifespanDate) - xScale(completionDate)),
        yScale(emissionsValue(data[data.length - 1])) - yScale(emissionsValue(data[0])),
      );
      g.append('text')
        .attr('dx', 5)
        .attr('dy', yScale(emissionsValue(data[0])) - 8)
        // .attr('transform', `translate(40, ${yScale(emissionsValue(data[0])) - 10}) rotate(${emissionsLineAngle})`)
        .attr('transform', `rotate(${emissionsLineAngle})`)
        .attr('font-weight', 'bold')
        .attr('fill', embodiedColor)
        // .attr('class', 'chart-descriptor')
        .text('PROJECT EMISSIONS')
        .attr('font-size', 10);

      const lifespanColor = '#999';
      // lifespan line
      g.append('line')
        .attr('x1', xScale(lifespanDate))
        .attr('x2', xScale(lifespanDate))
        .attr('y1', 0)
        .attr('y2', h)
        .attr('stroke', lifespanColor)
        .attr('stroke-width', 1.5)
        .attr('stroke-dasharray', 8);
      // const lifespanRect = g.append('rect')
      //   .attr('transform', `translate(${xScale(lifespanDate) + 5}, 0)`)
      //   .attr('fill', '#fff')
      //   .attr('height', h)
      //   .attr('width', 18)
      // const lifespanText = g.append('text')
      //   .attr('transform', `translate(${xScale(lifespanDate) + 10}, ${h / 2}) rotate(90)`)
      //   .attr('text-anchor', 'middle')
      //   .text('Project lifespan (50 years)')
      //   .attr('fill', lifespanColor)
      //   // .attr('font-size', 15)

      g.selectAll('.tracker').style('opacity', 1);

      // load pie chart
      const emissionTotals = JSON.parse('{"Aggregate & Asphalt Hardscape":13534582,"Concrete Hardscape":6399359,"Playground & Athletic":1159215,"Brick & Stone Hardscape":399565,"Infrastructure & Subsurface":32935,"Metal & Wood Hardscape":6841}');
      Highcharts.chart('pie-chart', {
        chart: {
          backgroundColor: null,
          plotBackgroundColor: null,
          plotBorderWidth: null,
          plotShadow: false,
          type: 'pie',
          reflow: true,
          height: chartHeight,
          width: hcChartWidth,
          margin: [50, 50, 50, 50]
        },
        colors: (function () {
          // This is generated via AI Assistant
          var colors = [],
            targetColor = chroma("#202528"),
            baseColor = chroma("#d6dade"), // Modify to your target color
            i,
            len = Object.keys(emissionTotals).length; // total number of steps between base and target color

          colors.push(baseColor.hex());
          for (i = 1; i < len; i += 1) {
            // Interpolate between baseColor and targetColor
            colors.push(chroma.mix(baseColor, targetColor, i / (len - 1)).hex());
          }
          return colors;
        }()),
        title: false,
        tooltip: {
          pointFormat: '<b>{point.y} kgCO₂e</b>',
        },
        accessibility: {
          point: {
            valueSuffix: '%',
          },
        },
        plotOptions: {
          series: {
            animation: false,
          },
          pie: {
            allowPointSelect: true,
            cursor: 'pointer',
            dataLabels: {
              crop: false,
              overflow: 'allow',
              enabled: true,
              color: '#333333',
              style: {
                fontSize: print ? 12 : 11,
                textOutline: 'none',
              },
              format: '<b>{point.name}</b><br>{point.percentage:.1f} %',
            },
          },
        },
        series: [{
          name: 'Emissions',
          colorByPoint: true,
          fillColor: '#d6dade',
          data: Object.entries(emissionTotals).map(([key, value]) => ({ name: key, y: value })),
        }],
        credits: {
          enabled: false,
        },
      });

      setTimeout(() => {
        resolve();
      }, 1000);
    });
  }

  const loadChartsWithWidths = async () => {
    // TODO: Rewrite this and the pdf rendering logic to better support page width detection.

    // the D3 and HC sizes aren't not being properly sized from the dom.
    // This computes and uses sizes that are related to the columns defined in the
    // scorecard.

    const column1Div = document.getElementById('column1');
    const computedStyle1 = window.getComputedStyle(column1Div);
    const computedWidth1 = computedStyle1.width;

    const columnWidth1 = parseInt(computedWidth1, 10);
    const columnWidth2 = columnWidth1 * 1.3;

    const detailWrapper = document.getElementById('project-details-wrapper');
    const mainWrapper = document.getElementById('main-wrapper');
    const detailHeight = parseInt(detailWrapper.offsetHeight);
    const mainHeight = parseInt(mainWrapper.offsetHeight);
    const mainWidth = parseInt(mainWrapper.offsetWidth);
    const docHeight = document.documentElement.clientHeight;

    // these values will be 0 if the scorecard modal is hidden.
    if (!columnWidth1 || !columnWidth2 || !docHeight) return;

    try {
      // calc(95% - 6.76vw - 64px);
      const verticalSpaceAvailable = docHeight - 10;
      const chartHeightBase = verticalSpaceAvailable - detailHeight - mainHeight;

      // print media doesn't seem to work properly with D3.  It could be that when the pdf render grabs the page
      // a zoom is applied? the 1.4 multiplier seems to adjust the graphs to the correct width.

      await loadCharts({ hcChartWidth: columnWidth1, d3ChartWidth: columnWidth2, chartHeight: chartHeightBase - 60 , print: false});
        // eslint-disable-next-line no-mixed-operators

    } catch (err) {
      console.warn('failed to load charts - %o', err.message);
    }
  };

  window.addEventListener('load', async () => {
    setTimeout(() => {
      loadChartsWithWidths();
      if (window.location.search.includes('print=true')) {
        window.print();
      }
    }, 500);
  });

  window.addEventListener('resize', () => {
    setTimeout(() => {
      loadChartsWithWidths();
    }, 200);
  });
</script>
</body>